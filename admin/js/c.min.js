(function(){var v,h,L,I,E,m,d,M,f,j,g,G,D,C,A,p,q,H,N,s,x,J,w,i,t,a,z,o,K,u,c,b,l,n,e,O,r,k,y=[].slice;t=typeof exports!=="undefined"&&exports!==null?exports:this;A=function(P){return P===true||P===false};p=function(P){return !P||P.length===0};C=function(P){return !P||/^\s*$/.test(P)};H=function(Q){try{if(p(Q)||C(Q)||(Q==null)){if(!(Q===false||Q===0)){return true}}}catch(P){}return false};q=function(Q){if(typeof Q==="object"){return true}try{JSON.parse(Q);return true}catch(P){}return false};N=function(P){return !isNaN(parseFloat(P))&&isFinite(P)};b=function(P){if(!N(P)||H(P)){return 0}return parseFloat(P)};l=function(P){if(!N(P)||H(P)){return 0}return parseInt(P)};function B(P){var R={};for(var Q=0;Q<P.length;++Q){if(P[Q]!==undefined){R[Q]=P[Q]}}return R}String.prototype.toBool=function(){return this.toString()==="true"};Boolean.prototype.toBool=function(){return this.toString()==="true"};Object.size=function(R){var Q,P;P=0;for(Q in R){if(R.hasOwnProperty(Q)){P++}}return P};E=function(P,Q){return setTimeout(Q,P)};a=function(Q,R){var P;if(R==null){R=0}P=Math.pow(10,R);return Math.round(Q*P)/P};jQuery.fn.exists=function(){return jQuery(this).length>0};jQuery.fn.isVisible=function(){return jQuery(this).css("display")!=="none"};jQuery.fn.hasChildren=function(){return Object.size(jQuery(this).children())>3};h=(function(P){return function(Q){return encodeURI(Q).split(/%..|./).length-1}})(this);function F(S){for(var Q,P,R=S.length;R;Q=Math.floor(Math.random()*R),P=S[--R],S[R]=S[Q],S[Q]=P){}return S}window.debounce_timer=null;({debounce:function(R,P,Q){if(P==null){P=300}if(Q==null){Q=false}return function(){var T,S,U;T=1<=arguments.length?y.call(arguments,0):[];U=this;S=function(){if(!Q){return R.apply(U,T)}};if(window.debounce_timer!=null){clearTimeout(window.debounce_timer)}else{if(Q){R.apply(U,T)}}return window.debounce_timer=setTimeout(S,P)}}});Function.prototype.debounce=function(){var S,R,V,Q,T,P,U;P=arguments[0],Q=arguments[1],U=arguments[2],S=4<=arguments.length?y.call(arguments,3):[];if(P==null){P=300}if(Q==null){Q=false}if(U==null){U=window.debounce_timer}T=this;R=function(){if(!Q){T.apply(T,S)}return console.log("Debounce applied")};if(U!=null){try{clearTimeout(U)}catch(W){V=W}}else{if(Q){T.apply(obj,S);console.log("Executed immediately")}}return window.debounce_timer=setTimeout(R,P)};x=function(){return $(".newwindow").each(function(){var P,Q;P=$(this).attr("href");Q=function(R){if(R==null){return false}window.open(R);return false};$(this).click(function(){return Q(P)});return $(this).keypress(function(){return Q(P)})})};v=function(W,U){var R,V,S,P,Q,T;if(W==null){W=50}if(U==null){U="#status-container"}try{if($(U).exists()){Q=a(W*0.5);R=$(U).find(".ball");T=$(U).find(".ball1");R.removeClass("stop hide");R.css({width:""+W+"px",height:""+W+"px"});S=a(W/2+Q/2+9);P=a((W+10)/2-(Q+6)/2);T.removeClass("stop hide");T.css({width:""+Q+"px",height:""+Q+"px",top:"-"+S+"px","margin-left":""+P+"px"});return true}return false}catch(X){V=X;return console.log("Could not animate loader",V.message)}};u=function(Q){var P,S,R;if(Q==null){Q="#status-container"}try{if($(Q).exists()){P=$(Q).find(".ball");R=$(Q).find(".ball1");P.addClass("bballgood ballgood");R.addClass("bballgood ball1good");return E(250,function(){P.addClass("stop hide");P.removeClass("bballgood ballgood");R.addClass("stop hide");return R.removeClass("bballgood ballgood")})}}catch(T){S=T;return console.log("Could not stop load animation",S.message)}};c=function(Q){var P,S,R;if(Q==null){Q="#status-container"}try{if($(Q).exists()){P=$(Q).find(".ball");R=$(Q).find(".ball1");P.addClass("bballerror ballerror");R.addClass("bballerror ball1error");return E(1500,function(){P.addClass("stop hide");P.removeClass("bballerror ballerror");R.addClass("stop hide");return R.removeClass("bballerror ballerror")})}}catch(T){S=T;return console.log("Could not stop load error animation",S.message)}};$(function(){var R,P,Q;try{if(typeof picturefill==="function"){window.picturefill()}}catch(S){R=S;console.warn("Could not execute picturefill.")}x();try{if((P=window.totpParams).tfaLock==null){P.tfaLock=false}if(window.latejs==null){window.latejs=new Object()}if((Q=window.latejs).done==null){Q.done=false}if(window.latejs.done!==true&&window.totpParams.tfaLock!==true){if(typeof lateJS==="function"){lateJS()}}}catch(S){R=S;console.warn("There was an error calling lateJS(). If you haven't set that up, you can safely ignore this.")}try{if(typeof loadLast==="function"){return loadLast()}}catch(S){R=S;return console.warn("There was an error calling loadLast(). This may result in unexpected behaviour.")}});if(typeof window.passwords!=="object"){window.passwords=new Object()}window.passwords.goodbg="#cae682";window.passwords.badbg="#e5786d";if((r=window.passwords).minLength==null){r.minLength=8}if((k=window.passwords).overrideLength==null){k.overrideLength=21}if(typeof window.totpParams!=="object"){window.totpParams=new Object()}window.totpParams.popClass="pop-panel";if(window.totpParams.home==null){e=$.url();window.totpParams.home=e.attr("protocol")+"://"+e.attr("host")+"/"}if(window.totpParams.relative==null){window.totpParams.relative=""}if(window.totpParams.subdirectory==null){window.totpParams.subdirectory=""}window.totpParams.mainStylesheetPath=window.totpParams.relative+"css/otp_styles.css";window.totpParams.popStylesheetPath=window.totpParams.relative+"css/otp_panels.css";I=function(P){var R,Q;if(P==null){P="#createUser_submit"}R=$("#password").val();Q=new RegExp("^(?:(?=^.{"+window.passwords.minLength+",}$)((?=.*\\d)|(?=.*\\W+))(?![.\\n])(?=.*[A-Z])(?=.*[a-z]).*$)$");if(R.length>window.passwords.overrideLength||R.match(Q)){$("#password").css("background",window.passwords.goodbg);window.passwords.basepwgood=true}else{$("#password").css("background",window.passwords.badbg);window.passwords.basepwgood=false}G();if(!H($("#password2").val())){L(P);n(P)}return false};L=function(P){if(P==null){P="#createUser_submit"}if($("#password").val()===$("#password2").val()){$("#password2").css("background",window.passwords.goodbg);window.passwords.passmatch=true}else{$("#password2").css("background",window.passwords.badbg);window.passwords.passmatch=false}n(P);return false};n=function(P){var R,Q;if(P==null){P="#createUser_submit"}try{R=!(window.passwords.passmatch&&window.passwords.basepwgood);return $("#createUser_submit").attr("disabled",R)}catch(S){Q=S;window.passwords.passmatch=false;return window.passwords.basepwgood=false}};G=function(){var S,R,P,U,V,W,T,Q,X;if(!$("#strength-meter").exists()){R="<div id='strength-meter'><div id='strength-requirements'><p style='float:left;margin-top:2em'>Character Classes:</p><div id='strength-alpha'><p class='label'>a</p><div class='strength-eval'></div></div><div id='strength-alphacap'><p class='label'>A</p><div class='strength-eval'></div></div><div id='strength-numspecial'><p class='label'>1/!</p><div class='strength-eval'></div></div></div><div id='strength-bar'><label for='password-strength'>Strength: </label><progress id='password-strength' max='5'></progress><p>Time to crack: <span id='crack-time'></span></p></div></div>";V="<p><small>We require a password of at least "+window.passwords.minLength+" characters with at least one upper case letter, at least one lower case letter, and at least one digit or special character. You can also use <a href='http://imgs.xkcd.com/comics/password_strength.png'>any long password</a> of at least "+window.passwords.overrideLength+" characters, with no security requirements.</small></p>";$("#password_security").html(R+V)}W=$("#password").val();T=zxcvbn(W);S=(l(T.score)+1)*51;Q=255-l(Math.pow(T.score,2)*16);if(Q<0){Q=0}U="rgb("+Q+","+S+",0)";X="\nprogress[value]::-webkit-progress-value { background: -webkit-linear-gradient(left,rgb(255,0,30),"+U+"), -webkit-linear-gradient(top,rgba(255, 255, 255, .5), rgba(0, 0, 0, .5)); }";P="\nprogress::-moz-progress-bar { background: -moz-linear-gradient(left,rgb(255,0,30),"+U+"), -moz-linear-gradient(top,rgba(255, 255, 255, .5), rgba(0, 0, 0, .5)); }";if(!$("#dynamic").exists()){$("<style type='text/css' id='dynamic' />").appendTo("head")}$("#dynamic").text(X+P);$(".strength-eval").css("background",window.passwords.badbg);if(W.length>=window.passwords.overrideLength){$(".strength-eval").css("background",window.passwords.goodbg)}else{if(W.match(/^(?:((?=.*\d)|(?=.*\W+)).*$)$/)){$("#strength-numspecial .strength-eval").css("background",window.passwords.goodbg)}if(W.match(/^(?=.*[a-z]).*$/)){$("#strength-alpha .strength-eval").css("background",window.passwords.goodbg)}if(W.match(/^(?=.*[A-Z]).*$/)){$("#strength-alphacap .strength-eval").css("background",window.passwords.goodbg)}}$("#password-strength").attr("value",T.score+1);return $("#crack-time").text(T.crack_time_display)};M=function(){};g=function(V){var X,U,P,S,W,T,Q,R;if(V==null){V=window.totpParams.home}J();v();P=$("#totp_code").val();R=$("#username").val();W=$("#password").val();S=$("#remote").val();e=$.url();X="async_login_handler.php";Q=e.attr("protocol")+"://"+e.attr("host")+"/"+window.totpParams.subdirectory+X;U="action=verifytotp&code="+P+"&user="+R+"&password="+W+"&remote="+S;T=$.post(Q,U,"json");T.done(function(Y){var aa,Z;if(Y.status===true){try{$("#totp_message").text("Correct!").removeClass("error").addClass("good");Z=0;return $.each(Y.cookies.raw_cookie,function(ac,af){var ad;try{$.cookie(ac,af,Y.cookies.expires)}catch(ae){ad=ae;console.error("Couldn't set cookies",Y.cookies.raw_cookie)}Z++;if(Z===Object.size(Y.cookies.raw_cookie)){if(V==null){V=e.attr("protocol")+"://"+e.attr("host")+"/"}u();return E(500,function(){return window.location.href=V})}})}catch(ab){aa=ab;return console.error("Unexpected error while validating",aa.message)}}else{$("#totp_message").text(Y.human_error).addClass("error");$("#totp_code").val("");$("#totp_code").focus();c();return console.error("Invalid code error",Y.error,Y)}});return T.fail(function(Y,Z){$("#totp_message").text("Failed to contact server. Please try again.").addClass("error");console.error("AJAX failure",Q+"?"+U,Y,Z);return c()})};j=function(){var P,S,U,T,R,V,Q;J();v();Q=$("#username").val();T=encodeURIComponent($("#password").val());U=$("#code").val();e=$.url();P="async_login_handler.php";V=e.attr("protocol")+"://"+e.attr("host")+"/"+window.totpParams.subdirectory+P;S="action=removetotp&code="+U+"&username="+Q+"&password="+T+"&base64=true";R=$.get(V,S,"json");R.done(function(W){if(W.status!==true){$("#totp_message").text(W.human_error).addClass("error");console.error(W.error);console.warn(""+V+"?"+S);console.warn(W);c();return false}$("#totp_message").removeClass("error").addClass("good").text("Two-factor authentication removed for "+W.username+".");$("#totp_remove").remove();console.log(V+"?"+S);console.log(W);u();return false});return R.fail(function(W,X){$("#totp_message").text("Failed to contact server. Please try again.").addClass("error");console.error("AJAX failure",V+"?"+S,W,X);return c()})};s=function(){var P,S,V,T,R,W,U,Q;J();v();Q=$("#username").val();R=$("#password").val();V=$("#hash").val();T=$("#secret").val();e=$.url();P="async_login_handler.php";U=e.attr("protocol")+"://"+e.attr("host")+"/"+window.totpParams.subdirectory+P;S="action=maketotp&password="+R+"&user="+Q;W=$.post(U,S,"json");W.done(function(X){var ab,aa,Z,ac,ad,Y;if(X.status===true){$("#totp_message").html("To continue, scan this barcode with your smartphone authenticator application. <small><a href='#' id='alt_totp_help'>Don't have the app?</a></small>").removeClass("error").addClass("good");console.log(X);Y=X.svg;Z=X.raw;ad="show_secret";ac="showAltBarcode";ab="secretBarcode";aa="<form id='totp_verify' onsubmit='event.preventDefault();'> <p style='font-weight:bold'>If you're unable to do so, <a href='#' id='"+ad+"'>click here to manually input your key.</a></p> <div id='"+ab+"'> "+X.svg+" <p>Don't see the barcode? <a href='#' id='"+ac+"'>Click here</a></p> </div> <p>Once you've done so, enter the code generated by your app in the field below to verify your setup.</p> <fieldset> <legend>Confirmation</legend> <input type='number' pattern='[0-9]{6}' size='6' maxlength='6' id='code' name='code' placeholder='Code'/> <input type='hidden' id='username' name='username' value='"+Q+"'/> <input type='hidden' id='hash' name='hash' value='"+V+"'/> <input type='hidden' id='secret' name='secret' value='"+T+"'/> <button id='verify_totp_button' class='totpbutton'>Verify</button> </fieldset> </form>";$("#totp_start").remove();$("#totp_message").after(aa);$("#alt_totp_help").click(function(){return K()});$("#"+ad).click(function(){return w(X.human_secret)});$("#"+ac).click(function(){var ae;ae="<img src='"+X.raw+"' alt='TOTP barcode'/>";$(""+barcode_div).html(ae);return $("#"+ac).remove()});$("#verify_totp_button").click(function(){J();return z(T,V)});$("#totp_verify").submit(function(){J();return z(T,V)});return u()}else{console.error("Couldn't generate TOTP code",U+"?"+S);console.warn(X);$("#totp_message").text("There was an error generating your code. "+X.message).addClass("error");return c()}});W.fail(function(X,Y){$("#totp_message").text("Failed to contact server. Please try again.").addClass("error");console.error("AJAX failure",U+"?"+S,X,Y);return c()});return false};z=function(S,V){var P,R,T,W,U,Q;J();v();T=$("#code").val();V=$("#hash").val();S=$("#secret").val();Q=$("#username").val();e=$.url();P="async_login_handler.php";U=e.attr("protocol")+"://"+e.attr("host")+"/"+window.totpParams.subdirectory+P;R="action=savetotp&secret="+S+"&user="+Q+"&hash="+V+"&code="+T;W=$.post(U,R,"json");W.done(function(X){var Y;if(X.status===true){Y="<h1>Done!</h1><h2>Write down and save this backup code. Without it, you cannot disable two-factor authentication if you lose your device.</h2><pre id='backup_code'>"+X.backup+"</pre><br/><button id='to_home'>Home &#187;</a>";$("#totp_add").html(Y);$("#to_home").click(function(){return window.location.href=window.totpParams.home});return u()}else{Y="<p class='error' id='temp_error'>"+X.human_error+"</p>";if(!$("#temp_error").exists()){$("#verify_totp_button").after(Y)}else{$("#temp_error").html(Y)}console.error(X.error);return c()}});return W.fail(function(X,Y){$("#totp_message").text("Failed to contact server. Please try again.");console.error("AJAX failure",X,Y);return c()})};w=function(P){var Q;$("<link/>",{rel:"stylesheet",type:"text/css",media:"screen",href:window.totpParams.popStylesheetPath}).appendTo("head");Q="<div id='cover_wrapper'><div id='secret_id_panel' class='"+window.totpParams.popClass+" cover_content'><p class='close-popup'>X</p><h2>"+P+"</h2></div></div>";$("article").after(Q);$("article").addClass("blur");return $(".close-popup").click(function(){$("#cover_wrapper").remove();return $("article").removeClass("blur")})};D=function(){var Y,W,T,R,X,U,P,V,Q,S;e=$.url();Y="async_login_handler.php";Q=e.attr("protocol")+"://"+e.attr("host")+"/"+window.totpParams.subdirectory+Y;S=$("#username").val();W="action=cansms&user="+S;U="remove_totp_link";V="send_totp_sms";R="alt_auth_pane";X="alt_auth_messages";if($("#"+R).exists()){$("#"+R).toggle("fast");return false}T=new Object();T.remove="<a href='#' id='"+U+"'>Remove two-factor authentication</a>";P=$.get(Q,W,"json");P.done(function(Z){var aa,ab;if(Z[0]===true){T.sms="<a href='#' id='"+V+"'>Send SMS</a>"}else{console.warn("Couldn't get a valid result",Z,Q+"?"+W)}ab="";$.each(T,function(ad,ac){return ab+=ac});aa="<div id='"+R+"'><p>"+ab+"</p><p id='"+X+"'></p></div>";$("#totp_submit").after(aa);return $("#"+V).click(function(){var ac;W="action=sendtotptext&user="+S;ac=$.get(Q,W,"json");console.log("Sending message ...",Q+"?"+W);ac.done(function(ad){if(ad.status===true){$("#"+R).remove();return $("#totp_message").text(ad.message)}else{$("#"+X).addClass("error").text(ad.human_error);return console.error(ad.error)}});return ac.fail(function(ad,ae){console.error("AJAX failure trying to send TOTP text",Q+"?"+W);return console.error("Returns:",ad,ae)})})});P.fail(function(Z,aa){return console.error("Could not check SMS-ability",Z,aa)});return P.always(function(){return $("#"+U).click(function(){var Z;Z="\n  <p id='totp_message' class='error'>Are you sure you want to disable two-factor authentication?</p>\n  <form id='totp_remove' onsubmit='event.preventDefault();'>\n    <fieldset>\n      <legend>Remove Two-Factor Authentication</legend>\n      <input type='email' value='"+S+"' readonly='readonly' id='username' name='username'/><br/>\n      <input type='password' id='password' name='password' placeholder='Password'/><br/>\n      <input type='text' id='code' name='code' placeholder='Authenticator Code or Backup Code' size='32' maxlength='32' autocomplete='off'/><br/>\n      <button id='remove_totp_button' class='totpbutton'>Remove Two-Factor Authentication</button>\n    </fieldset>\n  </form>\n";$("#totp_prompt").html(Z).attr("id","totp_remove_section");$("#totp_remove").submit(function(){return j()});return $("#remove_totp_button").click(function(){return j()})})})};O=function(){var P,R,T,U,Q,S;J();e=$.url();P="async_login_handler.php";U=e.attr("protocol")+"://"+e.attr("host")+"/"+window.totpParams.subdirectory+P;T=$("#phone_auth").val()!=null?$("#phone_auth").val():null;Q=$("#username").val();R="action=verifyphone&username="+Q+"&auth="+T;S=$.get(U,R,"json");S.done(function(V){var W,X;if(V.status===false){if(!$("#phone_verify_message").exists()){$("#phone").before("<p id='phone_verify_message'></p>")}if(V.is_good===true){$("#verify_phone_button").remove();W="You've already verified your phone number, thanks!";X="good"}else{W=V.human_error;X="error";console.error(V.error)}$("#phone_verify_message").text(W).addClass(X);if(V.fatal===true){$("#verify_phone_button").attr("disabled",true);$("#verify_phone").unbind("submit").attr("onsubmit","")}return false}if(V.status===true){if(!$("#phone_auth").exists()){$("#username").after("<br/><input type='text' length='8' name='phone_auth' id='phone_auth' placeholder='Authorization Code'/>")}if(!$("#phone_verify_message").exists()){$("#phone").before("<p id='phone_verify_message'></p>")}$("#phone_verify_message").text(V.message);if(V.is_good!==true){return $("#verify_phone_button").text("Confirm")}else{$("#phone_auth").remove();$("#verify_later").remove();return $("#verify_phone_button").html("Continue &#187; ").unbind("click").click(function(){return window.location.href=window.totpParams.home})}}else{console.warn("Unexpected condition encountered verifying the phone number",U);console.log(V);return false}});return S.fail(function(V,W){console.error("AJAX failure trying to send phone verification text",U+"?"+R);return console.error("Returns:",V,W)})};K=function(P){if(P==null){P="help/instructions_pop.html"}$("<link/>",{rel:"stylesheet",type:"text/css",media:"screen",href:window.totpParams.popStylesheetPath}).appendTo("head");return $.get(window.totpParams.relative+P).done(function(R){var Q;$("article").after(R);$("article").addClass("blur");Q=""+window.totpParams.relative+"assets/";$(".android").html("<img src='"+Q+"playstore.png' alt='Google Play Store'/>");$(".ios").html("<img src='"+Q+"appstore.png' alt='iOS App Store'/>");$(".wp8").html("<img src='"+Q+"wpstore.png' alt='Windows Phone Store'/>");$(".large_totp_icon").each(function(){var S;S=Q+$(this).attr("src");return $(this).attr("src",S)});$(".app_link_container a").addClass("newwindow");x();return $(".close-popup").click(function(){$("article").removeClass("blur");return $("#cover_wrapper").remove()})}).fail(function(Q,R){return console.error("Failed to load instructions @ "+P,Q,R)})};o=function(Q,R){var S,P;S="advanced_options_list";if($("#"+S).exists()){$("#"+S).toggle("fast");return true}P="<ul id='"+S+"'>";P+="<li><a href='?2fa=t'>Configure Two-Factor Authentication</a></li>";P+="<li><a href='#' id='removeAccount'>Remove Account</a></li>";$("#settings_list").after(P);return $("#removeAccount").click(function(){return i(this,""+Q+"_user",R)})};i=function(R,T,U){var S,P,Q,W,V;if(U==null){U=true}V=$.cookie(T);P="remove_acct_button";Q="remove_account_section";W=U?"\n      <input type='text' id='code' name='code' placeholder='Authenticator Code or Backup Code' size='32' maxlength='32' autocomplete='off'/><br/>":"";S="<section id='"+Q+"'>\n  <p id='remove_message' class='error'>Are you sure you want to remove your account?</p>\n  <form id='account_remove' onsubmit='event.preventDefault();'>\n    <fieldset>\n      <legend>Remove My Account</legend>\n      <input type='email' value='"+V+"' readonly='readonly' id='username' name='username'/><br/>\n      <input type='password' id='password' name='password' placeholder='Password'/><br/>"+W+"\n      <button id='"+P+"' class='totpbutton'>Remove My Account Permanantly</button> <button onclick=\"window.location.href=totpParams.home\">Back to Safety</button>\n    </fieldset>\n  </form>\n</section>";if($("#login_block").exists()){$("#login_block").replaceWith(S)}else{$(R).after(S)}$("#"+P).click(function(){return f()});return $("#account_remove").submit(function(){return f()})};f=function(){var P,R,S,Q,T,U;v();e=$.url();P="async_login_handler.php";T=e.attr("protocol")+"://"+e.attr("host")+"/"+window.totpParams.subdirectory+P;U=$("#username").val();Q=$("#password").val();S=$("#code").exists()?$("#code").val():false;R="action=removeaccount&username="+U+"&password="+Q+"&code="+S;return $.post(T,R,"json").done(function(V){if(V.status===true){$("#remove_message").text("Your account has been successfully deleted.");$.each($.cookie(),function(X,W){return $.removeCookie(X,{path:"/"})});E(3000,function(){return window.location.href=window.totpParams.home});return u()}else{$("#remove_message").text("There was an error removing your account. Please try again.");console.error("Got an error-result: ",V.error);console.warn(T+"?"+R,V);return c()}}).fail(function(V,W){$("#remove_message").text(V.error).addClass("error");$("totp_code").val("");console.error("Ajax Failure",T+"?"+R,V,W);return c()})};J=function(){event.preventDefault();return event.returnValue=false};d=function(R,U){var Q,T,P,S,V;if(R==null){R="async_login_handler.php"}if(U==null){U=true}J();if(U){S=e.attr("protocol")+"://"+e.attr("host")+"/"+window.totpParams.subdirectory+R}else{S=R}V=$("#username").val();P=$("#password").val();T=Base64.encodeURI(P);Q="action=dologin&username="+V+"&password="+T+"&b64=true";return false};m=function(){var P;P=grecaptcha.getResponse();if(P.success!==true){$("#createUser_submit").before("<p id='createUser_fail' class='bg-danger'>Sorry, your CAPTCHA was incorrect. Please try again.</p>");grecaptcha.reset();return false}$("#createUser_fail").remove();return false};$(function(){var Q,P;if(window.passwords.submitSelector==null){P="#createUser_submit"}else{P=window.passwords.submitSelector}if($("#password.create").exists()){loadJS(window.totpParams.relative+"js/zxcvbn/zxcvbn.js");$("#password.create").keyup(function(){return I()}).change(function(){return I()});$("#password2").change(function(){return L()}).keyup(function(){return L()})}$("#totp_submit").submit(function(){return g()});$("#verify_totp_button").click(function(){return g()});$("#totp_start").submit(function(){return s()});$("#add_totp_button").click(function(){return s()});$("#totp_remove").submit(function(){return j()});$("#remove_totp_button").click(function(){return j()});$("#alternate_verification_prompt").click(function(){D();return false});$("#verify_phone").submit(function(){return O()});$("#verify_phone_button").click(function(){return O()});$("#verify_later").click(function(){return window.location.href=window.totpParams.home});$("#totp_help").click(function(){return K()});$("#showAdvancedOptions").click(function(){var S,T;S=$(this).attr("data-domain");T=$(this).attr("data-user-tfa")==="true"?true:false;return o(S,T)});try{if($.url().param("showhelp")!=null){K()}}catch(R){Q=R;E(300,function(){if($.url().param("showhelp")!=null){return K()}})}return $("<link/>",{rel:"stylesheet",type:"text/css",media:"screen",href:window.totpParams.mainStylesheetPath}).appendTo("head")})}).call(this);