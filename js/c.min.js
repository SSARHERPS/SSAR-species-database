(function(){var r,k,j,c,B,w,a,q,h,l,n,p,A,s,o,v,g,b,x,m,e,z,f,i,y,t=[].slice;x=typeof exports!=="undefined"&&exports!==null?exports:this;n=function(C){return C===true||C===false};p=function(C){return !C||C.length===0};l=function(C){return !C||/^\s*$/.test(C)};s=function(D){try{if(p(D)||l(D)||(D==null)){if(!(D===false||D===0)){return true}}}catch(C){}return false};A=function(D){if(typeof D==="object"){return true}try{JSON.parse(D);return true}catch(C){}return false};o=function(C){return !isNaN(parseFloat(C))&&isFinite(C)};f=function(C){if(!o(C)||s(C)){return 0}return parseFloat(C)};i=function(C){if(!o(C)||s(C)){return 0}return parseInt(C)};function u(C){var E={};for(var D=0;D<C.length;++D){if(C[D]!==undefined){E[D]=C[D]}}return E}String.prototype.toBool=function(){return this.toString()==="true"};Boolean.prototype.toBool=function(){return this.toString()==="true"};Object.size=function(E){var D,C;C=0;for(D in E){if(E.hasOwnProperty(D)){C++}}return C};B=function(C,D){return setTimeout(D,C)};m=function(D,E){var C;if(E==null){E=0}C=Math.pow(10,E);return Math.round(D*C)/C};jQuery.fn.exists=function(){return jQuery(this).length>0};jQuery.fn.isVisible=function(){return jQuery(this).css("display")!=="none"};jQuery.fn.hasChildren=function(){return Object.size(jQuery(this).children())>3};k=(function(C){return function(D){return encodeURI(D).split(/%..|./).length-1}})(this);function d(F){for(var D,C,E=F.length;E;D=Math.floor(Math.random()*E),C=F[--E],F[E]=F[D],F[D]=C){}return F}window.debounce_timer=null;({debounce:function(E,C,D){if(C==null){C=300}if(D==null){D=false}return function(){var G,F,H;G=1<=arguments.length?t.call(arguments,0):[];H=this;F=function(){if(!D){return E.apply(H,G)}};if(window.debounce_timer!=null){clearTimeout(window.debounce_timer)}else{if(D){E.apply(H,G)}}return window.debounce_timer=setTimeout(F,C)}}});Function.prototype.debounce=function(){var F,E,I,D,G,C,H;C=arguments[0],D=arguments[1],H=arguments[2],F=4<=arguments.length?t.call(arguments,3):[];if(C==null){C=300}if(D==null){D=false}if(H==null){H=window.debounce_timer}G=this;E=function(){if(!D){G.apply(G,F)}return console.log("Debounce applied")};if(H!=null){try{clearTimeout(H)}catch(J){I=J}}else{if(D){G.apply(obj,F);console.log("Executed immediately")}}return window.debounce_timer=setTimeout(E,C)};g=function(){return $(".newwindow").each(function(){var C,D;C=$(this).attr("href");D=function(E){if(E==null){return false}window.open(E);return false};$(this).click(function(){return D(C)});return $(this).keypress(function(){return D(C)})})};r=function(J,H){var E,I,F,C,D,G;if(J==null){J=50}if(H==null){H="#status-container"}try{if($(H).exists()){D=m(J*0.5);E=$(H).find(".ball");G=$(H).find(".ball1");E.removeClass("stop hide");E.css({width:""+J+"px",height:""+J+"px"});F=m(J/2+D/2+9);C=m((J+10)/2-(D+6)/2);G.removeClass("stop hide");G.css({width:""+D+"px",height:""+D+"px",top:"-"+F+"px","margin-left":""+C+"px"});return true}return false}catch(K){I=K;return console.log("Could not animate loader",I.message)}};e=function(D){var C,F,E;if(D==null){D="#status-container"}try{if($(D).exists()){C=$(D).find(".ball");E=$(D).find(".ball1");C.addClass("bballgood ballgood");E.addClass("bballgood ball1good");return B(250,function(){C.addClass("stop hide");C.removeClass("bballgood ballgood");E.addClass("stop hide");return E.removeClass("bballgood ballgood")})}}catch(G){F=G;return console.log("Could not stop load animation",F.message)}};z=function(D){var C,F,E;if(D==null){D="#status-container"}try{if($(D).exists()){C=$(D).find(".ball");E=$(D).find(".ball1");C.addClass("bballerror ballerror");E.addClass("bballerror ball1error");return B(1500,function(){C.addClass("stop hide");C.removeClass("bballerror ballerror");E.addClass("stop hide");return E.removeClass("bballerror ballerror")})}}catch(G){F=G;return console.log("Could not stop load error animation",F.message)}};$(function(){var C;try{window.picturefill()}catch(D){C=D;console.log("Could not execute picturefill.")}return g()});b=new Object();b.goodbg="#cae682";b.badbg="#e5786d";if(b.minLength==null){b.minLength=8}if(b.overrideLength==null){b.overrideLength=21}c=function(){var C;C=$("#password").val();if(C.length>b.overrideLength||C.match(/^(?:(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$)$/)){$("#password").css("background",b.goodbg);b.basepwgood=true}else{$("#password").css("background",b.badbg);b.basepwgood=false}h();if(!s($("#password2").val())){j()}y();return false};j=function(){if($("#password").val()===$("#password2").val()){$("#password2").css("background",b.goodbg);b.passmatch=true}else{$("#password2").css("background",b.badbg);b.passmatch=false}y();return false};y=function(){var D,C;try{D=!(b.passmatch&&b.basepwgood);return $("#createUser_submit").attr("disabled",D)}catch(E){C=E;b.passmatch=false;return b.basepwgood=false}};h=function(){var C,D,E;if(!$("#strength-meter").exists()){C="<div id='strength-meter'><div id='strength-requirements'><div id='strength-alpha'><p class='label'>a</p><div class='strength-eval'></div></div><div id='strength-alphacap'><p class='label'>A</p><div class='strength-eval'></div></div><div id='strength-numspecial'><p class='label'>1/!</p><div class='strength-eval'></div></div></div><div id='strength-bar'><label for='password-strength'>Strength: </label><progress id='password-strength' max='5'></progress></div></div>";$("#login .right").prepend(C)}D=$("#password").val();E=zxcvbn(D);$(".strength-eval").css("background",b.badbg);if(D.length>20){$(".strength-eval").css("background",b.goodbg)}else{if(D.match(/^(?:((?=.*\d)|(?=.*\W+)).*$)$/)){$("#strength-numspecial .strength-eval").css("background",b.goodbg)}if(D.match(/^(?=.*[a-z]).*$/)){$("#strength-alpha .strength-eval").css("background",b.goodbg)}if(D.match(/^(?=.*[A-Z]).*$/)){$("#strength-alphacap .strength-eval").css("background",b.goodbg)}}return $("#password-strength").attr("value",E.score+1)};w=function(){};q=function(){var C,F,G,I,E,H,D;event.preventDefault();r();G=$("#totp_code").val();D=$("#username").val();E=$.url();C="async_login_handler.php";H=E.attr("protocol")+"://"+E.attr("host")+"/"+C;F="action=verifytotp&code="+G+"&user="+D;I=$.post(H+C,F,"json");I.done(function(J){var K,L;if(J.status===true){$("#totp_message").text("Correct!").removeClass("error").addClass("good");K=J.expires;L=0;return $.each(J.raw_cookie(function(M,O){var N;$.cookie(M,O,K);L++;if(L===Object.size(J.raw_cookie)){N=E.attr("protocol")+"://"+E.attr("host")+"/";e();return window.location(N)}}))}else{$("#totp_message").text(J.human_error);$("#totp_code").val("");$("#totp_code").focus();return z()}});return I.fail(function(J,K){$("#totp_message").text("Failed to contact server. Please try again.");return z()})};a=function(){return event.preventDefault()};v=function(){return event.preventDefault()};$(function(){$("#password").keypress(function(){return c()}).change(function(){return c()}).keyup(function(){return c()});return $("#password2").keypress(function(){return j()}).change(function(){return j()}).keyup(function(){return j()})})}).call(this);