(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa=[].slice,ra=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};pa={},pa.o=$.url(),pa.urlString=pa.o.attr("protocol")+"://"+pa.o.attr("host")+pa.o.attr("directory"),pa.query=pa.o.attr("fragment"),a={},window.locationData={},locationData.params={enableHighAccuracy:!0},locationData.last=void 0,F=function(a){return a===!0||a===!1},G=function(a){return!a||0===a.length},E=function(a){return!a||/^\s*$/.test(a)},I=function(a){try{if((G(a)||E(a)||null==a)&&a!==!1&&0!==a)return!0}catch(b){}return!1},H=function(a){if("object"==typeof a)return!0;try{return JSON.parse(a),!0}catch(b){}return!1},J=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},K=function(a){return J(a)},la=function(a,b){return null==b&&(b=!1),!J(a)||I(a)?b?NaN:0:parseFloat(a)},ma=function(a,b){return null==b&&(b=!1),!J(a)||I(a)?b?NaN:0:parseInt(a)},na=function(a){var b,c,d;d={};for(c in a)b=a[c],void 0!==b&&(d[c]=b);return d},String.prototype.toBool=function(){return""+this=="true"},Boolean.prototype.toBool=function(){return""+this=="true"},Number.prototype.toBool=function(){return""+this=="1"},Object.size=function(a){var b,c;c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c},p=function(a,b){return setTimeout(b,a)},X=function(a,b){var c;return null==b&&(b=0),c=Math.pow(10,b),Math.round(a*c)/c},jQuery.fn.exists=function(){return jQuery(this).length>0},jQuery.fn.polymerSelected=function(a,b){var c,d,e,f;if(null==a&&(a=void 0),null==b&&(b="attrForSelected"),c=b!==!0?$(this).attr(b):!0,null==a){f=void 0;try{f=$(this).get(0).selected,J(f)&&!I(c)&&(e=$(this).find("paper-item")[ma(f)],f=c!==!0?$(e).attr(c):$(e).text())}catch(g){return d=g,!1}return("null"===f||null==f)&&(f=void 0),f}if(F(a)){if($(this).parent().children().removeAttribute("aria-selected"),$(this).parent().children().removeAttribute("active"),$(this).parent().children().removeClass("iron-selected"),$(this).prop("selected",a),$(this).prop("active",a),$(this).prop("aria-selected",a),a===!0)return $(this).addClass("iron-selected")}else try{return $(this).get(0).select(a)}catch(g){return d=g,!1}},jQuery.fn.polymerChecked=function(a){var b;return null==a&&(a=void 0),null!=a?jQuery(this).prop("checked",a):(b=jQuery(this)[0].checked,("null"===b||null==b)&&(b=void 0),b)},jQuery.fn.isVisible=function(){return"none"!==jQuery(this).css("display")},jQuery.fn.hasChildren=function(){return Object.size(jQuery(this).children())>3},j=function(){return function(a){return encodeURI(a).split(/%..|./).length-1}}(this),W=function(a,b){var c,d,e;return null==a&&(a=0),null==b&&(b=1),e=Math.random(),null==a&&(c=[0,a],a=c[0],b=c[1]),a>b&&(d=[b,a],a=d[0],b=d[1]),Math.floor(e*(b-a+1)+a)},window.debounce_timer=null,Function.prototype.debounce=function(){var a,b,c,d,e,f,g;if(f=arguments[0],d=arguments[1],g=arguments[2],a=4<=arguments.length?qa.call(arguments,3):[],null==f&&(f=300),null==d&&(d=!1),null==g&&(g=window.debounce_timer),e=this,b=function(){return d?void 0:e.apply(e,a)},null!=g)try{clearTimeout(g)}catch(h){c=h}else d&&e.apply(obj,a);return window.debounce_timer=setTimeout(b,f)},M=function(a,b,c){var d,e,f,g;if(null==b&&(b={}),null==c&&(c=!0),$("script[src='"+a+"']").exists()){if("function"==typeof b)try{b()}catch(h){d=h,console.error("Script is already loaded, but there was an error executing the callback function - "+d.message)}return!0}return g=document.createElement("script"),g.setAttribute("src",a),g.setAttribute("async","async"),g.setAttribute("type","text/javascript"),g.src=a,g.async=!0,f=function(){var a;a=g.readyState;try{if(!b.done&&(!a||/loaded|complete/.test(a))&&(b.done=!0,"function"==typeof b))try{return b()}catch(c){return d=c,console.error("Postload callback error - "+d.message)}}catch(c){return d=c,console.error("Onload error - "+d.message)}},e=function(){console.warn("There may have been a problem loading "+a);try{if(!b.done&&(b.done=!0,"function"==typeof b&&c))try{return b()}catch(e){return d=e,console.error("Post error callback error - "+d.message)}}catch(e){return d=e,console.error("There was an error in the error handler! "+d.message)}},g.setAttribute("onload",f),g.setAttribute("onreadystate",f),g.setAttribute("onerror",e),g.onload=g.onreadystate=f,g.onerror=e,document.getElementsByTagName("head")[0].appendChild(g),!0},String.prototype.toTitleCase=function(){var a,b,c,d,e,f,g,h,i,j,k;for(h=this.replace(/([^\W_]+[^\s-]*) */g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()}),e=["A","An","The","And","But","Or","For","Nor","As","At","By","For","From","In","Into","Near","Of","On","Onto","To","With"],f=0,a=e.length;a>f;f++)c=e[f],d=RegExp("\\s"+c+"\\s","g"),h=h.replace(d,function(a){return a.toLowerCase()});for(k=["Id","Tv"],g=0,b=k.length;b>g;g++)i=k[g],j=RegExp("\\b"+i+"\\b","g"),h=h.replace(j,i.toUpperCase());return h},ga=function(a){var b;return b=function(a){return a.replace(a,a.toUpperCase())},a.replace(/((?=((?!-)[\W\s\r\n]))\s[A-Za-z]|^[A-Za-z])/g,b)},N=function(a){return null==a&&(a=!0),$(".newwindow").each(function(){var b,c;return b=$(this).attr("href"),null==b&&(b=$(this).attr("data-href")),c=function(a){return null==a?!1:(window.open(a),!1)},$(this).click(function(d){return a&&(d.preventDefault(),d.stopPropagation()),c(b)}),$(this).keypress(function(){return c(b)})})},oa=function(a,b,c,d){var e,f;return null==b&&(b=""),null==c&&(c=3e3),null==d&&(d="#search-status"),null==(null!=(f=window.metaTracker)?f.isToasting:void 0)&&null==window.metaTracker&&(window.metaTracker={},window.metaTracker.isToasting=!1),window.metaTracker.isToasting?(p(250,function(){return oa(a,b,c,d)}),!1):(window.metaTracker.isToasting=!0,J(c)||(c=3e3),d.slice(0,1)===!1&&(d="#"+d),$(d).exists()||(e='<paper-toast id="'+d.slice(1)+'" duration="'+c+'"></paper-toast>',$(e).appendTo("body")),$(d).attr("text",a).text(a).addClass(b),$(d).get(0).show(),p(c+500,function(){return $(d).empty(),$(d).removeClass(b),$(d).attr("text",""),window.metaTracker.isToasting=!1}))},P=function(a){return null==a?!1:(window.open(a),!1)},Q=function(a){return P(a)},B=function(a){return null==a?!1:(window.location.href=a,!1)},d=function(b,c){var e,f;null==b&&(b="loader"),null==c&&(c=0),J(b)&&(b="loader"),"#"===b.slice(0,1)?(f=b,b=b.slice(1)):f="#"+b,$(f).removeAttr("hidden");try{return a.isLoading?100>c?(c++,p(100,function(){return d(b,c)}),!1):(console.warn("Loader timed out waiting for load completion"),!1):($(f).exists()?$(f).attr("active",!0):$("body").append('<paper-spinner id="'+b+'" active></paper-spinner'),a.isLoading=!0,!1)}catch(g){return e=g,console.warn("Could not animate loader",e.message)}},ja=function(b,c,d){var e,f,g;null==b&&(b="loader"),null==c&&(c=1e3),null==d&&(d=0),"#"===b.slice(0,1)?(g=b,b=b.slice(1)):g="#"+b;try{return a.isLoading?($(g).exists()&&($(g).addClass("good"),(f=function(){return p(c,function(){return $(g).removeClass("good").attr("active",!1).removeAttr("active"),p(1,function(){var b,c;return $(g).prop("hidden",!0),null!=("undefined"!=typeof Browsers&&null!==Browsers?Browsers.browser:void 0)?(b=["Spartan","Project Spartan","Edge","Microsoft Edge","MS Edge"],c=Browsers.browser.browser.name,ra.call(b,c)>=0||"EdgeHTML"===Browsers.browser.engine.name?($(g).remove(),a.isLoading=!1):($(g).removeAttr("hidden"),p(50,function(){return a.isLoading=!1}))):($(g).removeAttr("hidden"),p(50,function(){return a.isLoading=!1}))})})})()),!1):100>d?(d++,p(100,function(){return ja(b,c,d)}),!1):!1}catch(h){return e=h,console.warn("Could not stop load animation",e.message)}},ka=function(b,c,d,e){var f,g,h;null==c&&(c="loader"),null==d&&(d=7500),"#"===c.slice(0,1)?(h=c,c=c.slice(1)):h="#"+c;try{return a.isLoading?($(h).exists()&&($(h).addClass("bad"),null!=b&&oa(b,"",d),(g=function(){return p(d,function(){return $(h).removeClass("bad").prop("active",!1).removeAttr("active"),p(1,function(){var b,c;return $(h).prop("hidden",!0),null!=("undefined"!=typeof Browsers&&null!==Browsers?Browsers.browser:void 0)?(b=["Spartan","Project Spartan","Edge","Microsoft Edge","MS Edge"],c=Browsers.browser.browser.name,ra.call(b,c)>=0||"EdgeHTML"===Browsers.browser.engine.name?($(h).remove(),a.isLoading=!1):($(h).removeAttr("hidden"),p(50,function(){return a.isLoading=!1}))):($(h).removeAttr("hidden"),p(50,function(){return a.isLoading=!1}))})})})()),!1):100>e?(e++,p(100,function(){return ka(b,c,d,e)}),!1):!1}catch(i){return f=i,console.warn("Could not stop load error animation",f.message)}},q=function(a,b,c,d){var e,f,g,h,i;null==c&&(c=void 0),null==d&&(d=void 0),e=function(){if("function"==typeof d)return d();throw Error("There was an error performing the CORS request")},h={url:a,data:b,type:"get",crossDomain:!0};try{$.ajax(h).done(function(){return"function"==typeof c?(c(),!1):void 0}).fail(function(){return console.warn("Couldn't perform jQuery AJAX CORS. Attempting manually.")})}catch(j){g=j,console.warn("There was an error using jQuery to perform the CORS request. Attemping manually.")}if(a=a+"?"+b,f=function(a,b){var c;return null==a&&(a="get"),c=new XMLHttpRequest,"withCredentials"in c?c.open(a,b,!0):"undefined"!=typeof XDomainRequest?(c=new XDomainRequest,c.open(a,b)):c=null,c},i=f("get",a),!i)throw Error("CORS not supported");return i.onload=function(){var a;return a=i.responseText,"function"==typeof c&&c(a),!1},i.onerror=function(){return console.warn("Couldn't do manual XMLHttp CORS request"),e()},i.send(),!1},o=function(a){var b;try{if(!$("html /deep/ "+a).exists())throw"Bad /deep/ selector";return $("html /deep/ "+a)}catch(c){b=c;try{if(!$("html >>> "+a).exists())throw"Bad >>> selector";return $("html >>> "+a)}catch(c){return b=c,$(a)}}},n=function(a){return o(a)},L=function(a,d){var e,f;return null==a&&(a=".lightboximage"),null==d&&(d=!1),f={onStart:function(){return S()},onEnd:function(){return R(),b()},onLoadStart:function(){return c()},onLoadEnd:function(){return b()},allowedTypes:"png|jpg|jpeg|gif|bmp|webp",quitOnDocClick:!0,quitOnImgClick:!0},e=d?n(a):$(a),e.click(function(a){try{return $(this).imageLightbox(f).startImageLightbox(),a.preventDefault(),a.stopPropagation(),console.warn("Event propagation was stopped when clicking on this.")}catch(b){return a=b,console.error("Unable to lightbox this image!")}}).each(function(){var a,b,c;try{if("img"===$(this).prop("tagName").toLowerCase()&&"a"!==$(this).parent().prop("tagName").toLowerCase())return c=$(this).removeClass("lightboximage").prop("outerHTML"),b=function(){switch(!1){case!!I($(this).attr("data-layzr-retina")):return $(this).attr("data-layzr-retina");case!!I($(this).attr("data-layzr")):return $(this).attr("data-layzr");default:return $(this).attr("src")}}.call(this),$(this).replaceWith("<a href='"+b+"' class='lightboximage'>"+c+"</a>")}catch(d){return a=d,console.warn("Couldn't parse through the elements")}})},c=function(){return $('<div id="imagelightbox-loading"><div></div></div>').appendTo("body")},b=function(){return $("#imagelightbox-loading").remove(),$("#imagelightbox-overlay").click(function(){return $("#imagelightbox").click()})},S=function(){return $('<div id="imagelightbox-overlay"></div>').appendTo("body")},R=function(){return $("#imagelightbox-overlay").remove()},w=function(a){return null==a&&(a=".sciname"),$(".sciname").each(function(){var a;return a="italic"===$(this).css("font-style")?"normal":"italic",$(this).css("font-style",a)})},V=function(a){return a=encodeURIComponent(a),a.replace(/%20/g,"+")},z=function(a){var b,c;return null==a&&(a=void 0),c=function(a,b){return window.locationData.lat=a.coords.latitude,window.locationData.lng=a.coords.longitude,window.locationData.acc=a.coords.accuracy,window.locationData.last=Date.now(),null!=b&&b(window.locationData),!1},b=function(a,b){var c;return c=function(){switch(a.code){case 0:return"There was an error while retrieving your location: "+a.message;case 1:return"The user prevented this page from retrieving a location";case 2:return"The browser was unable to determine your location: "+a.message;case 3:return"The browser timed out retrieving your location."}}(),console.error(c),null!=b&&b(!1),!1},navigator.geolocation?navigator.geolocation.getCurrentPosition(c,b,window.locationData.params):(console.warn("This browser doesn't support geolocation!"),null!=a?a(!1):void 0)},e=function(){return f(),!1},f=function(a){return null==a&&(a=".click"),$(a).each(function(){var a,b,c;try{if(c=$(this).attr("data-href"),I(c)&&(c=$(this).attr("data-url"),null!=c&&$(this).attr("data-newtab","true")),!I(c)){$(this).unbind();try{c===pa.o.attr("path")&&"paper-tab"===$(this).prop("tagName").toLowerCase()&&$(this).parent().prop("selected",$(this).index())}catch(d){b=d,console.warn("tagname lower case error")}return $(this).click(function(){var a,b,d;return c=$(this).attr("data-href"),I(c)&&(c=$(this).attr("data-url")),(null!=(a=$(this).attr("newTab"))?a.toBool():void 0)||(null!=(b=$(this).attr("newtab"))?b.toBool():void 0)||(null!=(d=$(this).attr("data-newtab"))?d.toBool():void 0)?Q(c):B(c)}),c}if(a=$(this).attr("data-function"),null!=a)return $(this).unbind(),$(this).click(function(){try{return window[a]()}catch(c){return b=c,console.error("'"+a+"()' is a bad function - "+b.message)}})}catch(d){return b=d,console.error("There was a problem binding to #"+$(this).attr("id")+" - "+b.message)}}),!1},A=function(){var a;return a=function(){return $.map($("body *"),function(a){return"static"!==$(a).css("position")?parseInt($(a).css("z-index")||1):void 0})},Math.max.apply(null,a())},i=function(){var a,b,c;null==("undefined"!=typeof Browsers&&null!==Browsers?Browsers.hasCheckedBrowser:void 0)&&(("undefined"==typeof Browsers||null===Browsers)&&(window.Browsers={}),Browsers.hasCheckedBrowser=0);try{if(a=new WhichBrowser,Browsers.browser=a,a.isBrowser("Firefox")&&(c='<div id="firefox-warning" class="alert alert-warning alert-dismissible fade in" role="alert">\n  <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n  <strong>Warning!</strong> Firefox has buggy support for <a href="http://webcomponents.org/" class="alert-link">webcomponents</a> and the <a href="https://www.polymer-project.org" class="alert-link">Polymer project</a>. If you encounter bugs, try using <a href="https://www.google.com/chrome/" class="alert-link">Chrome</a> (recommended), <a href="www.opera.com/computer" class="alert-link">Opera</a>, Safari, <a href="https://www.microsoft.com/en-us/windows/microsoft-edge" class="alert-link">Edge</a>, or your phone instead &#8212; they\'ll all be faster, too.\n</div>',$("#title").after(c),$(".alert").alert(),console.warn("We've noticed you're using Firefox. Firefox has problems with this site, we recommend trying Google Chrome instead:","https://www.google.com/chrome/"),console.warn("Firefox took "+250*Browsers.hasCheckedBrowser+"ms after page load to render this error message.")),a.isBrowser("Internet Explorer")||a.isBrowser("Safari"))return $("#collapse-button").click(function(){return $(".collapse").collapse("toggle")})}catch(d){return b=d,100===Browsers.hasCheckedBrowser?(console.warn("We can't check your browser!"),console.warn("Known issues:"),console.warn("Firefox: Some VERY buggy behaviour"),console.warn("IE & Safari: The advanced options may not open"),!1):p(250,function(){return Browsers.hasCheckedBrowser++,i()})}},k=function(a){var b;return null==a&&(a=!1),b=function(){return $.get(pa.urlString+"meta.php","do=get_last_mod","json").done(function(b){var c;return a&&console.log("Forced version check:",b),J(b.last_mod)?(null==ia.lastMod&&(ia.lastMod=b.last_mod),b.last_mod>ia.lastMod?(c='<div id="outdated-warning" class="alert alert-warning alert-dismissible fade in" role="alert">\n  <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n  <strong>We have page updates!</strong> This page has been updated since you last refreshed. <a class="alert-link" id="refresh-page" style="cursor:pointer">Click here to refresh now</a> and get bugfixes and updates.\n</div>',$("#outdated-warning").exists()||($("body").append(c),$("#refresh-page").click(function(){return document.location.reload(!0)})),console.warn("Your current version is out of date! Please refresh the page.")):a?console.info("Your version is up to date: have "+ia.lastMod+", got "+b.last_mod):void 0):!1}).fail(function(){return console.warn("Couldn't check file version!!")}).always(function(){return p(3e5,function(){return b()})})},a||null==ia.lastMod?(b(),!0):!1},window.checkFileVersion=k,ba=function(){return"serviceworker"in navigator&&navigator.serviceWorker.register("js/serviceWorker.min.js").then(function(a){return console.log("ServiceWorker registered with scope",a.scope)})["catch"](function(a){return console.warn("ServiceWorker registration failed:",a)}),!1},u=function(){return oa("Sorry, this feature is not yet finished"),ja(),!1},$(function(){var a;w(),f(),N();try{$('[data-toggle="tooltip"]').tooltip()}catch(b){a=b,console.warn("Tooltips were attempted to be set up, but do not exist")}try{checkAdmin(),("undefined"!=typeof adminParams&&null!==adminParams?adminParams.loadAdminUi:void 0)===!0&&M("js/admin.min.js",function(){return loadAdminUi()})}catch(b){a=b,z(),M("js/jquery.cookie.min.js",function(){var a;return null!=$.cookie("ssarherps_user")&&(a='<paper-icon-button icon="create" class="click" data-href="'+pa.urlString+'admin/" data-toggle="tooltip" title="Go to administration" id="goto-admin"></paper-icon-button>',$("#bug-footer").append(a),f("#goto-admin"),$("#goto-admin").tooltip()),!1})}return i(),k()}),_={},_.targetApi="commonnames_api.php",_.targetContainer="#result_container",_.apiPath=pa.urlString+_.targetApi,ia={},ia.affiliateQueryUrl={amphibiaWeb:"http://amphibiaweb.org/cgi/amphib_query",reptileDatabase:"http://reptile-database.reptarium.cz/species",calPhotos:"http://calphotos.berkeley.edu/cgi/img_query",iNaturalist:"https://www.inaturalist.org/taxa/search"},U=function(a){var b,c,e,f;if(null==a&&(a=void 0),null==a){if(e=$("#search").val(),f=e,e=e.toLowerCase(),c=y(),(I(e)||null==e)&&I(c))return $("#search-status").attr("text","Please enter a search term."),$("#search-status")[0].show(),!1;$("#search").blur(),e=e.replace(/\./g,""),e=V(e),$("#loose").polymerChecked()&&(e+="&loose=true"),$("#fuzzy").polymerChecked()&&(e+="&fuzzy=true"),I(c)||(e=e+"&filter="+c),b="q="+e}else a===!0?(b="q=",f="(all items)"):(b="q="+a,f=a.split("&")[0]);return"#"===e||I(e)&&I(b)||"q="===b&&a!==!0?!1:(d(),$.get(_.targetApi,b,"json").done(function(a){return 0===ma(a.count)?(ca(a),m(!0),!1):a.status===!0?(x(a),!1):(m(!0),$("#search-status").attr("text",a.human_error),$("#search-status")[0].show(),console.error(a.error),console.warn(a),ka())}).fail(function(a,b){return console.error("There was an error performing the search"),console.warn(a,b,a.statusText),b=a.status+" - "+a.statusText,$("#search-status").attr("text","Couldn't execute the search - "+b),$("#search-status")[0].show(),ka()}).always(function(){var a;return a=Base64.encodeURI(e),null!=e&&aa(pa.urlString+"#"+a),!1}))},y=function(a,b){var c,d,e,f,g;if(null==a&&(a=".cndb-filter"),null==b&&(b="AND"),f={},$(a).each(function(){var a,b;return a=$(this).attr("data-column"),null==a?!0:(b=$(this).polymerSelected(),"any"===b||"all"===b||"*"===b?!0:(I(b)||b===!1)&&(b=$(this).val(),I(b))?!0:f[a]=b.toLowerCase())}),c=$("#alien-filter").get(0).selected,"both"!==c&&(f.is_alien="alien-only"===c?1:0),0===Object.size(f))return"";try{return f.BOOLEAN_TYPE=b,g=JSON.stringify(f),e=Base64.encodeURI(g)}catch(h){return d=h,!1}},x=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,q,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,J;null==b&&(b=_.targetContainer),i=a.result,_.result=i,n=[],o="",s="<table id='cndb-result-list' class='table table-striped table-hover col-md-12'>\n	<tr class='cndb-row-headers'>",q="</table>",F=ma(a.count)-1,g=null,d=0,j=["id","minor_type","notes","major_type","taxon_author","taxon_credit","image_license","image_credit","taxon_credit_date","parens_auth_genus","parens_auth_species","is_alien"],l=0,B=p(5e3,function(){return ka("There was a problem parsing the search results."),console.error("Couldn't finish parsing the results! Expecting "+F+" elements, timed out on "+l+"."),console.warn(i),!1});for(u in i){if(C=i[u],l=u,0===ma(u)){v=0,s+="\n<!-- Table Headers - "+Object.size(C)+" entries -->";for(w in C)H=C[w],z=w.replace(/_/g," "),ra.call(j,w)<0&&(c=$("#show-deprecated").polymerSelected()!==!0?"deprecated_scientific":"",w!==c&&(z=function(){switch(z){case"common name":return"english name";case"major subtype":return"english genus name";default:return z}}(),s+="\n		<th class='text-center'>"+z+"</th>",d++)),v++,v===Object.size(C)&&(s+="\n	</tr>",s+="\n<!-- End Table Headers -->",e=X(12/d,0),g="col-md-"+e)}G=C.genus+"+"+C.species,I(C.subspecies)||(G=G+"+"+C.subspecies),t="\n	<tr id='cndb-row"+u+"' class='cndb-result-entry' data-taxon=\""+G+'">',y=0;for(w in C){if(f=C[w],ra.call(j,w)<0){if("authority_year"===w)try{try{h=JSON.parse(f)}catch(K){k=K,console.warn("There was an error parsing '"+f+"', attempting to fix - ",k.message),E=f.split(":"),J=E[1].slice(E[1].search('"')+1,-2),J=J.replace(/"/g,"'"),E[1]='"'+J+'"}',f=E.join(":"),h=JSON.parse(f)}m=Object.keys(h)[0],D=h[m],ma(C.parens_auth_genus).toBool()&&(m="("+m+")"),ma(C.parens_auth_species).toBool()&&(D="("+D+")"),f="G: "+m+"<br/>S: "+D}catch(K){k=K,console.error("There was an error parsing '"+f+"'",k.message),h=f}c=$("#show-deprecated").polymerSelected()!==!0?"deprecated_scientific":"",w!==c&&("image"===w&&(f=I(f)?"<paper-icon-button icon='launch' data-href='"+ia.affiliateQueryUrl.calPhotos+"?rel-taxon=contains&where-taxon="+G+"' class='newwindow calphoto click' data-taxon=\""+G+'"></paper-icon-button>':"<paper-icon-button icon='image:image' data-lightbox='"+pa.urlString+f+"' class='lightboximage'></paper-icon-button>"),x="genus"!==w&&"species"!==w&&"subspecies"!==w?w+" text-center":w,("genus_authority"===w||"species_authority"===w)&&(x+=" authority"),"common_name"===w&&(f=ga(f),x+=" no-cap"),t+="\n		<td id='"+w+"-"+u+"' class='"+x+" "+g+"'>"+f+"</td>")}y++,y===Object.size(C)&&(t+="\n	</tr>",o+=t)}ma(u)===F&&(o=s+o+q,$(b).html(o),clearTimeout(B),N(),L(),O(),r(),$("#result-count").text(" - "+a.count+" entries"),ja())}return"space_common_fallback"!==a.method||$("#space-fallback-info").exists()?$("#space-fallback-info").exists()?$("#space-fallback-info").prop("hidden",!0):void 0:(A='<div id="space-fallback-info" class="alert alert-info alert-dismissible center-block fade in" role="alert">\n  <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n  <strong>Don\'t see what you want?</strong> We might use a slightly different name. Try <a href="" class="alert-link" id="do-instant-fuzzy">checking the "fuzzy" toggle and searching again</a>, or use a shorter search term.\n</div>',$("#result_container").before(A),$("#do-instant-fuzzy").click(function(a){var b;return a.preventDefault(),b=function(){return $("#fuzzy").get(0).checked=!0,U()},b.debounce()}))},T=function(a,b){var c,d,e,f,g,h;null==b&&(b=!0);try{c=JSON.parse(a)}catch(i){d=i,console.warn("There was an error parsing '"+a+"', attempting to fix - ",d.message),g=a.split(":"),h=g[1].slice(g[1].search('"')+1,-2),h=h.replace(/"/g,"'"),g[1]='"'+h+'"}',a=g.join(":");try{c=JSON.parse(a)}catch(i){return d=i,b?!1:a}}return e=Object.keys(c)[0],f=c[e],h={},h.genus=e,h.species=f,h},v=function(a,b){var c,d,e,f;if(null==b&&(b="#is-alien-container"),"boolean"==typeof a)d=a;else{if("object"!=typeof a)throw Error("Invalid data given to formatAlien()");d=ma(a.is_alien).toBool()}return d?(c='<iron-icon icon="maps:flight" class="small-icon alien-speices" id="modal-alien-species" data-toggle="tooltip"></iron-icon>',n(b).html(c),e="This species is not native",f='<div class="tooltip fade top in right manual-placement-tooltip" role="tooltip" style="top: 6.5em; left: 4em; right:initial; display:none" id="manual-alien-tooltip">\n  <div class="tooltip-arrow" style="top:50%;left:5px"></div>\n  <div class="tooltip-inner">'+e+"</div>\n</div>",n(b).after(f).mouseenter(function(){return n("#manual-alien-tooltip").css("display","block"),!1}).mouseleave(function(){return n("#manual-alien-tooltip").css("display","none"),!1}),n("#manual-location-tooltip").css("left","6em"),!1):(n(b).css("display","none"),!1)},l=function(a,b,c){var d,e,f,g,h,i;return null==a&&(a=void 0),null==b&&(b=void 0),null==c&&(c="#near-me-container"),null==a?(console.warn("Please specify a taxon."),!1):(null==locationData.last&&z(),g=(Date.now()-locationData.last)/1e3,g>900&&z(),d="https://www.inaturalist.org/places.json",e="taxon="+a+"&latitude="+locationData.lat+"&longitude="+locationData.lng+"&place_type=county",h="",f="",i="",$.get(d,e,"json").done(function(a){return Object.size(a)>0?(h="communication:location-on",f="good-location",i="This species occurs in your county"):(h="communication:location-off",f="bad-location",i="This species does not occur in your county")}).fail(function(){return f="bad-location",h="warning",i="We couldn't determine your location"}).always(function(){var a;return a='<div class="tooltip fade top in right manual-placement-tooltip" role="tooltip" style="top: 6.5em; left: 4em; right:initial; display:none" id="manual-location-tooltip">\n  <div class="tooltip-arrow" style="top:50%;left:5px"></div>\n  <div class="tooltip-inner">'+i+"</div>\n</div>",n(c).html("<iron-icon icon='"+h+"' class='small-icon "+f+" near-me' data-toggle='tooltip' id='near-me-icon'></iron-icon>"),$(c).after(a).mouseenter(function(){return n("#manual-location-tooltip").css("display","block"),!1}).mouseleave(function(){return n("#manual-location-tooltip").css("display","none"),!1}),null!=b?b():void 0}),!1)},D=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,o,r;if(null==a&&(a=ia.taxonImage),null==b&&(b=ia.activeTaxon),null==c&&(c=void 0),null==b)return console.error("Tried to insert a modal image, but no taxon was provided!"),!1;if("object"!=typeof b)return console.error("Invalid taxon data type (expecting object), got "+typeof b),r={taxon:b,imageUrl:i,defaultTaxon:ia.activeTaxon,defaultImage:ia.taxonImage},console.warn(r),!1;if(l=function(a,b,d){var e,f,g,h,i,j,k,l;null==d&&(d="calphoto"),l=a.thumbUri,i=a.imageUri,j="function"==typeof a.imageLinkUri?a.imageLinkUri(a.imageUri):void 0,h=a.imageLicense,g=a.imageCredit,f='<div class="modal-img-container">\n  <a href="'+i+'" class="'+d+'-img-anchor center-block text-center">\n    <img src="'+l+'"\n      data-href="'+j+'"\n      class="'+d+'-img-thumb"\n      data-taxon="'+b+'" />\n  </a>\n  <p class="small text-muted text-center">\n    Image by '+g+" under "+h+"\n  </p>\n</div>",n("#meta-taxon-info").before(f),(k=function(a){var b;try{return n("#modal-taxon").get(0).fit(),p(250,function(){return n("#modal-taxon").get(0).fit(),p(750,function(){return n("#modal-taxon").get(0).fit()})})}catch(c){return b=c,10>a?(a++,p(100,function(){return k(a)})):console.warn("Couldn't execute fit!")}})(0);try{L("."+d+"-img-anchor",!0)}catch(m){e=m,console.error("Error lightboxing images")}return"function"==typeof c&&c(),!1},m=[b.genus,b.species],null!=b.subspecies&&m.push(b.subspecies),o=m.join("+"),null!=a.imageUri)return"string"==typeof a&&(i=a,a={},a.imageUri=i),j=a.imageUri.split("."),g=j.pop(),k=j.join("."),a.thumbUri=""+pa.urlString+k+"-thumb."+g,a.imageUri=""+pa.urlString+k+"."+g,l(a,o,"ssarimg"),!1;d="getthumbinfo=1&num=all&cconly=1&taxon="+o+"&format=xml",e=function(b){var c,e,f;f=xmlToJSON.parseString(b),window.testData=f;try{c=f.calphotos[0]}catch(g){e=g,c=void 0}if(null==c)return!1;a={};try{if(a.thumbUri=c.thumb_url[0]._text,null==a.thumbUri)return console.warn("CalPhotos didn't return any valid images for this search!"),!1;a.imageUri=c.enlarge_jpeg_url[0]._text,a.imageLinkUri=c.enlarge_url[0]._text,a.imageLicense=c.license[0]._text,a.imageCredit=c.copyright[0]._text+" (via CalPhotos)"}catch(g){return e=g,console.warn("CalPhotos didn't return any valid images for this search!",ia.affiliateQueryUrl.calPhotos+"?"+d),!1}return l(a,o),!1},h=function(){return C(),console.error("Couldn't load a CalPhotos image to insert!"),!1};try{q(ia.affiliateQueryUrl.calPhotos,d,e,h)}catch(s){f=s,console.error(f.message)}return!1},fa=function(){var a,b,c,d,e,f;return f="http://reptile-database.reptarium.cz/interfaces/services/check-taxon",c=ia.activeTaxon,d=[c.genus,c.species],null!=c.subspecies&&d.push(c.subspecies),e=d.join("+"),b=d.join(" "),b=b.slice(0,1).toUpperCase()+b.slice(1),a="taxon="+e,$.get(f,a,"json").done(function(a){var c,d,e,f,g,h,i;return"VALID"===a.response?(console.info("_"+b+"_ is the consensus taxon with Reptile Database"),!0):"SYNONYM"===a.response?(c=a.VALID[0],e=c.toLowerCase().replace(/\s/gm,"+"),d=c.split(/\s/),h={genus:d[0],species:d[1]},g="Reptile Database",f="<paper-button id='modal-alt-linkout' class=\"hidden-xs\">"+g+"</paper-button>",i=ia.affiliateQueryUrl.reptileDatabase+"?genus="+h.genus+"&species="+h.species,null!=i&&($("#modal-alt-linkout").replaceWith(f),$("#modal-alt-linkout").click(function(){return Q(i)})),console.info("Reptile Database uses recognizes _"+b+"_ as _"+c+"_"),ea(h)):(n("#modal-alt-linkout").remove(),console.warn("Reptile Database couldn't find this taxon at all!"))}).fail(function(){return console.warn("Unable to check the taxon on Reptile Database!"),!1}),!1},ea=function(a){var b,c,d;return b={genus:a.genus,species:a.species,subspecies:ia.activeTaxon.species},d=[b.genus,b.species],null!=b.subspecies&&d.push(b.subspecies),n(".modal-img-container").exists()?(console.info("CalPhotos agrees with SSAR"),!0):(c=function(){var a;return a=d.join(" "),a=a.slice(0,1).toUpperCase()+a.slice(1),console.info("CalPhotos agrees with Reptile Database, so we're linking to _"+a+"_ for CalPhotos"),$("#modal-calphotos-linkout").unbind().click(function(){return Q(ia.affiliateQueryUrl.calPhotos+"?rel-taxon=contains&where-taxon="+d.join("+"))}),!1},D(ia.taxonImage,b,c),!1)},O=function(a){var b;return null==a&&(a=void 0),null==a?($(".cndb-result-entry").click(function(){return O($(this).attr("data-taxon"))}),!1):(d(),$("#modal-taxon").exists()||(b='<paper-dialog modal id=\'modal-taxon\' entry-animation="scale-up-animation" exit-animation="scale-down-animation">\n  <h2 id="modal-heading"></h2>\n  <paper-dialog-scrollable id=\'modal-taxon-content\'></paper-dialog-scrollable>\n  <div class="buttons">\n    <paper-button id=\'modal-inat-linkout\'>iNaturalist</paper-button>\n    <paper-button id=\'modal-calphotos-linkout\' class="hidden-xs">CalPhotos</paper-button>\n    <paper-button id=\'modal-alt-linkout\' class="hidden-xs"></paper-button>\n    <paper-button dialog-dismiss autofocus>Close</paper-button>\n  </div>\n</paper-dialog>',$("body").append(b)),$.get(_.targetApi,"q="+a,"json").done(function(c){var d,e,f,h,i,j,k,m,o,q,s,t,u,x,y,z,A,B,C;if(h=c.result[0],null==h)return oa("There was an error fetching the entry details. Please try again later."),ka(),!1;if(B=T(h.authority_year),C="",B!==!1&&(k="<span class='genus_authority authority'>"+h.genus_authority+"</span> "+B.genus,y="<span class='species_authority authority'>"+h.species_authority+"</span> "+B.species,ma(h.parens_auth_genus).toBool()&&(k="("+k+")"),ma(h.parens_auth_species).toBool()&&(y="("+y+")"),C="<div id=\"is-alien-container\" class=\"tooltip-container\"></div>\n<div id='near-me-container' data-toggle='tooltip' data-placement='top' title='' class='near-me tooltip-container'></div>\n<p>\n  <span class='genus'>"+h.genus+"</span>,\n  "+k+";\n  <span class='species'>"+h.species+"</span>,\n  "+y+"\n</p>"),i="",!I(h.deprecated_scientific)){i="<p>Deprecated names: ";try{x=JSON.parse(h.deprecated_scientific),o=0,$.each(x,function(a,b){return o++,1!==o&&(i+="; "),i+="<span class='sciname'>"+a+"</span>, "+b,o===Object.size(x)?i+="</p>":void 0})}catch(E){j=E,i="",console.error("There were deprecated scientific names, but the JSON was malformed.")}
}q="",I(h.minor_type)||(q=" <iron-icon icon='arrow-forward'></iron-icon> <span id='taxon-minor-type'>"+h.minor_type+"</span>"),I(h.notes)?(h.notes="Sorry, we have no notes on this taxon yet.",h.taxon_credit=""):I(h.taxon_credit)||"null"===h.taxon_credit?h.taxon_credit="This taxon information is uncredited.":(A=I(h.taxon_credit_date)||"null"===h.taxon_credit_date?"":" ("+h.taxon_credit_date+")",h.taxon_credit="Taxon information by "+h.taxon_credit+"."+A);try{s=markdown.toHTML(h.notes)}catch(E){j=E,s=h.notes,console.warn("Couldn't parse markdown!! "+j.message)}s=s.replace(/\&amp;(([a-z]+|[0-9]+);)/gm,"&$1"),f=I(h.major_common_type)?"":" (<span id='taxon-common-type'>"+h.major_common_type+"</span>) ",b="<div id='meta-taxon-info'>\n  "+C+"\n  <p>\n    English name: <span id='taxon-common-name' class='common_name no-cap'>"+ga(h.common_name)+"</span>\n  </p>\n  <p>\n    Type: <span id='taxon-type' class=\"major_type\">"+h.major_type+"</span>\n    "+f+"\n    <iron-icon icon='arrow-forward'></iron-icon>\n    <span id='taxon-subtype' class=\"major_subtype\">"+h.major_subtype+"</span>"+q+"\n  </p>\n  "+i+"\n</div>\n<h3>Taxon Notes</h3>\n<p id='taxon-notes'>"+s+'</p>\n<p class="text-right small text-muted">'+h.taxon_credit+"</p>",$("#modal-taxon-content").html(b),$("#modal-inat-linkout").unbind().click(function(){return Q(ia.affiliateQueryUrl.iNaturalist+"?q="+a)}),$("#modal-calphotos-linkout").unbind().click(function(){return Q(ia.affiliateQueryUrl.calPhotos+"?rel-taxon=contains&where-taxon="+a)}),t=null,e=null,z=a.split("+"),ia.activeTaxon={genus:z[0],species:z[1],subspecies:z[2]},"caudata"===(u=h.linnean_order.toLowerCase())||"anura"===u||"gymnophiona"===u?(e="AmphibiaWeb",t=ia.affiliateQueryUrl.amphibiaWeb+"?where-genus="+h.genus+"&where-species="+h.species):I(h.linnean_order)||(e="Reptile Database",d="<paper-button id='modal-alt-linkout' class=\"hidden-xs\">"+e+"</paper-button>",t=ia.affiliateQueryUrl.reptileDatabase+"?genus="+h.genus+"&species="+h.species,fa()),null!=t?($("#modal-alt-linkout").replaceWith(d),$("#modal-alt-linkout").click(function(){return Q(t)})):$("#modal-alt-linkout").addClass("hidden").unbind(),w(),r(),m=a.charAt(0).toUpperCase()+a.slice(1),m=m.replace(/\+/g," "),n("#modal-heading").text(m),I(h.image)&&(h.image=void 0),ia.taxonImage={imageUri:h.image,imageCredit:h.image_credit,imageLicense:h.image_license};try{D()}catch(E){j=E,console.info("Unable to insert modal image! ")}return l(a,function(){var a;return v(h),ja(),a=n("#modal-taxon")[0],n("#modal-taxon").on("iron-overlay-opened",function(){return a.fit(),a.scrollTop=0,la($(a).css("top").slice(0,-2))>$(window).height()&&$(a).css("top","12.5vh"),p(250,function(){return a.fit()})}),a.sizingTarget=n("#modal-taxon-content")[0],Y("#modal-taxon")}),g()}).fail(function(){return ka()}),!1)},g=function(){return $("[dialog-dismiss]").unbind().click(function(){return $(this).parents("paper-dialog").remove()})},r=function(){var a,b;return a=["de","and"],b=function(b){return $.each(a,function(a,c){var d;return d=" "+c+" ",null!=b?b=b.replace(d," <span class='force-lower'>"+c+"</span> "):void 0}),b},n(".authority").each(function(){var a;return a=$(this).text(),I(a)?void 0:$(this).html(b(a))}),!1},ha=function(){var a;return a=_.result},aa=function(a,b,c){return null==a&&(a="#"),null==b&&(b=null),null==c&&(c=null),history.pushState(b,c,a),pa.query=$.url(a).attr("fragment"),!1},m=function(a){var b;return null==a&&(a=!1),$("#result-count").text(""),b='<div class="bs-callout bs-callout-info center-block col-xs-12 col-sm-8 col-md-5">\n  Search for a common or scientific name above to begin, eg, "California slender salamander" or "<span class="sciname">Batrachoseps attenuatus</span>"\n</div>',$("#result_container").html(b),a===!0?!1:(aa(),$(".cndb-filter").attr("value",""),$("#collapse-advanced").collapse("hide"),$("#search").attr("value",""),$("#linnean-order").polymerSelected("any"),w(),!1)},s=function(){var a,b,c,e,f;return d(),a="q=*",b=new Date,f=1===(""+b.getMonth()).length?"0"+(b.getMonth()+1):b.getMonth()+1,e=1===(""+b.getDate()).length?"0"+b.getDate():b.getDate(),c=b.getUTCFullYear()+"-"+f+"-"+e,$.get(""+_.apiPath,a,"json").done(function(b){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;try{if(b.status!==!0)throw Error("Invalid Result");h="      ",i=[],w=["genus","species","subspecies","common_name","image","image_credit","image_license","major_type","major_common_type","major_subtype","minor_type","linnean_order","genus_authority","species_authority","deprecated_scientific","notes","taxon_credit","taxon_credit_date"],t=["genus","common_name","taxon_author","major_subtype","linnean_order"],r=0,u=b.result;for(s in u)if(v=u[s],k=[],!I(v.genus)){for(l in v)if(m=v[l],e=l.replace(/"/g,'""'),f=m.replace(/"/g,'""').replace(/&#39;/g,"'"),0===r&&ra.call(w,e)>=0&&i.push(e.replace(/_/g," ").toTitleCase()),ra.call(w,e)>=0){if(/[a-z]+_authority/.test(e))try{d=JSON.parse(v.authority_year),p="",x="";for(s in d)z=d[s],p=s.replace(/"/g,'""').replace(/&#39;/g,"'"),x=z.replace(/"/g,'""').replace(/&#39;/g,"'");switch(e.split("_")[0]){case"genus":y=f.toTitleCase()+" "+p,ma(v.parens_auth_genus).toBool()&&(y="("+y+")");break;case"species":y=f.toTitleCase()+" "+x,ma(v.parens_auth_species).toBool()&&(y="("+y+")")}f=y}catch(A){o=A}ra.call(t,e)>=0&&(f=f.toTitleCase()),"image"!==e||I(f)||(f="http://ssarherps.org/cndb/"+f),k.push('"'+f+'"')}r++,j=k.join(","),h+="\n"+j}return g=i.join(",")+"\n"+h,n="data:text/csv;charset=utf-8,"+encodeURIComponent(g),q='<paper-dialog class="download-file" id="download-csv-file" modal>\n  <h2>Your file is ready</h2>\n  <paper-dialog-scrollable class="dialog-content">\n    <p>\n      Please note that some special characters in names may be decoded incorrectly by Microsoft Excel. If this is a problem, following the steps in <a href="https://github.com/SSARHERPS/SSAR-species-database/blob/master/meta/excel_unicode_readme.md"  onclick=\'window.open(this.href); return false;\' onkeypress=\'window.open(this.href); return false;\'>this README <iron-icon icon="launch"></iron-icon></a> to force Excel to format it correctly.\n    </p>\n    <p class="text-center">\n      <a href="'+n+'" download="ssar-common-names-'+c+'.csv" class="btn btn-default"><iron-icon icon="file-download"></iron-icon> Download Now</a>\n    </p>\n  </paper-dialog-scrollable>\n  <div class="buttons">\n    <paper-button dialog-dismiss>Close</paper-button>\n  </div>\n</paper-dialog>',$("#download-csv-file").exists()?$("#download-csv-file").replaceWith(q):$("body").append(q),$("#download-chooser").get(0).close(),Y("#download-csv-file")}catch(A){return o=A,ka("There was a problem creating the CSV file. Please try again later."),console.error("Exception in downloadCSVList() - "+o.message),console.warn("Got",b,"from",_.apiPath+"?"+a,b.status)}}).fail(function(){return ka("There was a problem communicating with the server. Please try again later.")}),!1},t=function(){var a,b,c,e,f,g;return d(),b=new Date,g=1===(""+b.getMonth()).length?"0"+(b.getMonth()+1):b.getMonth()+1,e=1===(""+b.getDate()).length?"0"+b.getDate():b.getDate(),c=b.getUTCFullYear()+"-"+g+"-"+e,f='     <!doctype html>\n     <html lang="en">\n       <head>\n         <title>SSAR Common Names Checklist ver. '+c+'</title>\n         <meta http-equiv="X-UA-Compatible" content="IE=edge">\n         <meta charset="UTF-8"/>\n         <meta name="theme-color" content="#445e14"/>\n         <meta name="viewport" content="width=device-width, initial-scale=1" />\n         <link href=\'http://fonts.googleapis.com/css?family=Droid+Serif:400,700,700italic,400italic|Roboto+Slab:400,700\' rel=\'stylesheet\' type=\'text/css\' />\n         <style type="text/css" id="ssar-checklist-inline-stylesheet">\n/*!\n* Bootstrap v3.3.5 (http://getbootstrap.com)\n* Copyright 2011-2015 Twitter, Inc.\n* Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n*/\n\n/*!\n* Generated using the Bootstrap Customizer (http://getbootstrap.com/customize/?id=e14c62a4d4eee8f40b6b)\n* Config saved to config.json and https://gist.github.com/e14c62a4d4eee8f40b6b\n*//*!\n* Bootstrap v3.3.5 (http://getbootstrap.com)\n* Copyright 2011-2015 Twitter, Inc.\n* Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n*//*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:bold}dfn{font-style:italic}h1{font-size:2em;margin:0.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-0.5em}sub{bottom:-0.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace, monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type="checkbox"],input[type="radio"]{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:0}input[type="number"]::-webkit-inner-spin-button,input[type="number"]::-webkit-outer-spin-button{height:auto}input[type="search"]{-webkit-appearance:textfield;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box}input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid #c0c0c0;margin:0 2px;padding:0.35em 0.625em 0.75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:bold}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}/*! Source: https://github.com/h5bp/html5-boilerplate/blob/master/src/css/main.css */@media print{*,*:before,*:after{background:transparent !important;color:#000 !important;-webkit-box-shadow:none !important;box-shadow:none !important;text-shadow:none !important}a,a:visited{text-decoration:underline}a[href]:after{content:" (" attr(href) ")"}abbr[title]:after{content:" (" attr(title) ")"}a[href^="#"]:after,a[href^="javascript:"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}p,h2,h3{orphans:3;widows:3}h2,h3{page-break-after:avoid}.navbar{display:none}.btn>.caret,.dropup>.btn>.caret{border-top-color:#000 !important}.label{border:1px solid #000}.table{border-collapse:collapse !important}.table td,.table th{background-color:#fff !important}.table-bordered th,.table-bordered td{border:1px solid #ddd !important}}*{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}*:before,*:after{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}html{font-size:10px;-webkit-tap-highlight-color:rgba(0,0,0,0)}body{font-family:"Roboto Slab","Droid Serif",Cambria,Georgia,"Times New Roman",Times,serif;font-size:14px;line-height:1.42857143;color:#333;background-color:#fff}input,button,select,textarea{font-family:inherit;font-size:inherit;line-height:inherit}a{color:#337ab7;text-decoration:none}a:hover,a:focus{color:#23527c;text-decoration:underline}a:focus{outline:thin dotted;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}figure{margin:0}img{vertical-align:middle}.img-responsive{display:block;max-width:100%;height:auto}.img-rounded{border-radius:6px}.img-thumbnail{padding:4px;line-height:1.42857143;background-color:#fff;border:1px solid #ddd;border-radius:4px;-webkit-transition:all .2s ease-in-out;-o-transition:all .2s ease-in-out;transition:all .2s ease-in-out;display:inline-block;max-width:100%;height:auto}.img-circle{border-radius:50%}hr{margin-top:20px;margin-bottom:20px;border:0;border-top:1px solid #eee}.sr-only{position:absolute;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);border:0}.sr-only-focusable:active,.sr-only-focusable:focus{position:static;width:auto;height:auto;margin:0;overflow:visible;clip:auto}[role="button"]{cursor:pointer}h1,h2,h3,h4,h5,h6,.h1,.h2,.h3,.h4,.h5,.h6{font-family:inherit;font-weight:500;line-height:1.1;color:inherit}h1 small,h2 small,h3 small,h4 small,h5 small,h6 small,.h1 small,.h2 small,.h3 small,.h4 small,.h5 small,.h6 small,h1 .small,h2 .small,h3 .small,h4 .small,h5 .small,h6 .small,.h1 .small,.h2 .small,.h3 .small,.h4 .small,.h5 .small,.h6 .small{font-weight:normal;line-height:1;color:#777}h1,.h1,h2,.h2,h3,.h3{margin-top:20px;margin-bottom:10px}h1 small,.h1 small,h2 small,.h2 small,h3 small,.h3 small,h1 .small,.h1 .small,h2 .small,.h2 .small,h3 .small,.h3 .small{font-size:65%}h4,.h4,h5,.h5,h6,.h6{margin-top:10px;margin-bottom:10px}h4 small,.h4 small,h5 small,.h5 small,h6 small,.h6 small,h4 .small,.h4 .small,h5 .small,.h5 .small,h6 .small,.h6 .small{font-size:75%}h1,.h1{font-size:36px}h2,.h2{font-size:30px}h3,.h3{font-size:24px}h4,.h4{font-size:18px}h5,.h5{font-size:14px}h6,.h6{font-size:12px}p{margin:0 0 10px}.lead{margin-bottom:20px;font-size:16px;font-weight:300;line-height:1.4}@media (min-width:768px){.lead{font-size:21px}}small,.small{font-size:85%}mark,.mark{background-color:#fcf8e3;padding:.2em}.text-left{text-align:left}.text-right{text-align:right}.text-center{text-align:center}.text-justify{text-align:justify}.text-nowrap{white-space:nowrap}.text-lowercase{text-transform:lowercase}.text-uppercase{text-transform:uppercase}.text-capitalize{text-transform:capitalize}.text-muted{color:#777}.text-primary{color:#337ab7}a.text-primary:hover,a.text-primary:focus{color:#286090}.text-success{color:#3c763d}a.text-success:hover,a.text-success:focus{color:#2b542c}.text-info{color:#31708f}a.text-info:hover,a.text-info:focus{color:#245269}.text-warning{color:#8a6d3b}a.text-warning:hover,a.text-warning:focus{color:#66512c}.text-danger{color:#a94442}a.text-danger:hover,a.text-danger:focus{color:#843534}.bg-primary{color:#fff;background-color:#337ab7}a.bg-primary:hover,a.bg-primary:focus{background-color:#286090}.bg-success{background-color:#dff0d8}a.bg-success:hover,a.bg-success:focus{background-color:#c1e2b3}.bg-info{background-color:#d9edf7}a.bg-info:hover,a.bg-info:focus{background-color:#afd9ee}.bg-warning{background-color:#fcf8e3}a.bg-warning:hover,a.bg-warning:focus{background-color:#f7ecb5}.bg-danger{background-color:#f2dede}a.bg-danger:hover,a.bg-danger:focus{background-color:#e4b9b9}.page-header{padding-bottom:9px;margin:40px 0 20px;border-bottom:1px solid #eee}ul,ol{margin-top:0;margin-bottom:10px}ul ul,ol ul,ul ol,ol ol{margin-bottom:0}.list-unstyled{padding-left:0;list-style:none}.list-inline{padding-left:0;list-style:none;margin-left:-5px}.list-inline>li{display:inline-block;padding-left:5px;padding-right:5px}dl{margin-top:0;margin-bottom:20px}dt,dd{line-height:1.42857143}dt{font-weight:bold}dd{margin-left:0}@media (min-width:768px){.dl-horizontal dt{float:left;width:160px;clear:left;text-align:right;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.dl-horizontal dd{margin-left:180px}}abbr[title],abbr[data-original-title]{cursor:help;border-bottom:1px dotted #777}.initialism{font-size:90%;text-transform:uppercase}blockquote{padding:10px 20px;margin:0 0 20px;font-size:17.5px;border-left:5px solid #eee}blockquote p:last-child,blockquote ul:last-child,blockquote ol:last-child{margin-bottom:0}blockquote footer,blockquote small,blockquote .small{display:block;font-size:80%;line-height:1.42857143;color:#777}blockquote footer:before,blockquote small:before,blockquote .small:before{content:\' 14 \x00A0\'}.blockquote-reverse,blockquote.pull-right{padding-right:15px;padding-left:0;border-right:5px solid #eee;border-left:0;text-align:right}.blockquote-reverse footer:before,blockquote.pull-right footer:before,.blockquote-reverse small:before,blockquote.pull-right small:before,.blockquote-reverse .small:before,blockquote.pull-right .small:before{content:\'\'}.blockquote-reverse footer:after,blockquote.pull-right footer:after,.blockquote-reverse small:after,blockquote.pull-right small:after,.blockquote-reverse .small:after,blockquote.pull-right .small:after{content:\'\x00A0  14\'}address{margin-bottom:20px;font-style:normal;line-height:1.42857143}.clearfix:before,.clearfix:after,.dl-horizontal dd:before,.dl-horizontal dd:after{content:" ";display:table}.clearfix:after,.dl-horizontal dd:after{clear:both}.center-block{display:block;margin-left:auto;margin-right:auto}.pull-right{float:right !important}.pull-left{float:left !important}.hide{display:none !important}.show{display:block !important}.invisible{visibility:hidden}.text-hide{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0}.hidden{display:none !important}.affix{position:fixed}\n          /* Manual Overrides */\n          .sciname {\n            font-style: italic;\n            }\n          .entry-sciname {\n            font-style: italic;\n            font-weight: bold;\n            }\n           body { padding: 1rem; }\n           .species-entry aside:first-child {\n             margin-top: 5rem;\n             }\n           section .entry-header {\n             text-indent: 2em;\n             }\n           .clade-declaration {\n             font-variant: small-caps;\n             border-top: 1px solid #000;\n             border-bottom: 1px solid #000;\n             page-break-before: always;\n             break-before: always;\n             }\n           .species-entry {\n             page-break-inside: avoid;\n             break-inside: avoid;\n             }\n           @media print {\n             body {\n               font-size:12px;\n               }\n             .h4 {\n               font-size: 13px;\n               }\n             @page {\n               counter-increment: page;\n               /*counter-reset: page 1;*/\n                @bottom-right {\n                 content: counter(page);\n                }\n                /* margin: 0px auto; */\n               }\n           }\n         </style>\n       </head>\n       <body>\n         <div class="container-fluid">\n           <article>\n             <h1 class="text-center">SSAR Common Names Checklist ver. '+c+"</h1>",a="q=*&order=linnean_order,genus,species,subspecies",$.get(""+_.apiPath,a,"json").done(function(b){var d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;try{if(b.status!==!0)throw Error("Invalid Result");n=[],m=[],s=b.result;for(q in s)if(v=s[q],!I(v.genus)&&!I(v.species)){try{d=JSON.parse(v.authority_year),l="",y="";for(e in d)A=d[e],l=e.replace(/&#39;/g,"'"),y=A.replace(/&#39;/g,"'");k=v.genus_authority.toTitleCase()+" "+l,ma(v.parens_auth_genus).toBool()&&(k="("+k+")"),x=v.species_authority.toTitleCase()+" "+y,ma(v.parens_auth_species).toBool()&&(x="("+x+")")}catch(B){i=B,console.warn("There was a problem parsing the authority information for _"+v.genus+" "+v.species+" "+v.subspecies+"_ - "+i.message),console.warn(i.stack),console.warn("We were working with",d,l,k,y,x)}try{p=markdown.toHTML(v.notes)}catch(B){i=B,console.warn("Unable to parse Markdown for _"+v.genus+" "+v.species+" "+v.subspecies+"_"),p=v.notes}o="",I(p)||I(v.taxon_credit)||(z="",I(v.taxon_credit_date)||(z=", "+v.taxon_credit_date),o='<p class="text-right small text-muted">\n  <cite>\n    '+v.taxon_credit+z+"\n  </cite>\n</p>"),r="",t=v.linnean_order.trim(),ra.call(m,t)<0&&(r+='<h2 class="clade-declaration text-capitalize text-center">'+v.linnean_order+" &#8212; "+v.major_common_type+"</h2>",m.push(v.linnean_order.trim())),u=v.genus,ra.call(n,u)<0&&(r+='<aside class="genus-declaration lead">\n  <span class="entry-sciname text-capitalize">'+v.genus+'</span>\n  <span class="entry-authority">'+k+"</span>\n</aside>",n.push(v.genus)),w=v.genus.slice(0,1)+". ",j='<section class="species-entry">\n  '+r+'\n  <p class="h4 entry-header">\n    <span class="entry-sciname">\n      <span class="text-capitalize">'+w+"</span> "+v.species+" "+v.subspecies+'\n    </span>\n    <span class="entry-authority">\n      '+x+'\n    </span>\n    &#8212;\n    <span class="common_name no-cap">\n      '+ga(v.common_name)+'\n    </span>\n  </p>\n  <div class="entry-content">\n    '+p+"\n    "+o+"\n  </div>\n</section>",f+=j}return f+="</article>\n</div>\n</body>\n</html>",h="data:text/html;charset=utf-8,"+encodeURIComponent(f),g='<paper-dialog  modal class="download-file" id="download-html-file">\n  <h2>Your file is ready</h2>\n  <paper-dialog-scrollable class="dialog-content">\n    <p class="text-center">\n      <a href="'+h+'" download="ssar-common-names-'+c+'.html" class="btn btn-default"><iron-icon icon="file-download"></iron-icon> Download Now</a>\n    </p>\n  </paper-dialog-scrollable>\n  <div class="buttons">\n    <paper-button dialog-dismiss>Close</paper-button>\n  </div>\n</paper-dialog>',$("#download-html-file").exists()?$("#download-html-file").replaceWith(g):$("body").append(g),$("#download-chooser").get(0).close(),Y("#download-html-file")}catch(B){return i=B,ka("There was a problem creating your file. Please try again later."),console.error("Exception in downloadHTMLList() - "+i.message),console.warn("Got",b,"from",_.apiPath+"?"+a,b.status),console.warn(i.stack)}}).fail(function(){return ka("There was a problem communicating with the server. Please try again later.")}),!1},da=function(){var a;return a='<paper-dialog id="download-chooser" modal>\n  <h2>Select Download Type</h2>\n  <paper-dialog-scrollable class="dialog-content">\n    <p>\n      Once you select a file type, it will take a moment to prepare your download. Please be patient.\n    </p>\n  </paper-dialog-scrollable>\n  <div class="buttons">\n    <paper-button dialog-dismiss>Cancel</paper-button>\n    <paper-button dialog-confirm id="initiate-csv-download">CSV</paper-button>\n    <paper-button dialog-confirm id="initiate-html-download">HTML</paper-button>\n  </div>\n</paper-dialog>',$("#download-chooser").exists()||$("body").append(a),n("#initiate-csv-download").click(function(){return s()}),n("#initiate-html-download").click(function(){return t()}),Y("#download-chooser"),!1},Y=function(a,b,c){var d,e,f;if(null==a&&(a="#download-chooser"),null==b&&(b=0),"function"!=typeof c&&(c=function(){return g()}),!(10>b))return ka("Unable to show dialog. Please try again.");try{return n(a).get(0).open(),"function"==typeof c&&c(),ja()}catch(h){return e=h,f=b+1,d=250,p(d,function(){return console.warn("Trying again to display dialog after "+f*d+"ms"),Y(a,f,c)})}},Z=function(a,b){var c,d;return null==b&&(b=!1),c=null!=a?a:$("#search").val(),d=!1,-1!==c.search(/\+/)&&(d=!0,c=c.replace(/\+/g," ").trim(),p(100,function(){return Z()})),(d||null!=a)&&($("#search").attr("value",c),b||p(5e3,function(){return Z(void 0,!0)})),!1},C=function(){var a,b,c,d;if(null==ia.hasShownWorkaround&&(ia.hasShownWorkaround=!1),ia.hasShownWorkaround)return!1;try{b=new WhichBrowser}catch(e){return c=e,!1}return b.isType("mobile")?(ia.hasShownWorkaround=!0,!1):(a=function(){switch(b.browser.name){case"Chrome":return"Install the extension \"<a class='alert-link' href='https://chrome.google.com/webstore/detail/allow-control-allow-origi/nlfbmbojpeacfghkpbjhddihlkkiljbi?utm_source=chrome-app-launcher-info-dialog'>Allow-Control-Allow-Origin: *</a>\", activate it on this domain, and you'll see them in your popups!";case"Firefox":return"Follow the instructions <a class='alert-link' href='http://www-jo.se/f.pfleger/forcecors-workaround'>for this ForceCORS add-on</a>, or try Chrome for a simpler extension. Once you've done so, you'll see photos in your popups!";case"Internet Explorer":return"Follow these <a class='alert-link' href='http://stackoverflow.com/a/20947828'>StackOverflow instructions</a> while on this site, and you'll see them in your popups!";default:return""}}(),d='<div class="alert alert-info alert-dismissible center-block fade in" role="alert">\n  <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n  <strong>Want CalPhotos images in your species dialogs?</strong> '+a+"\n  We're working with CalPhotos to enable this natively, but it's a server change on their side.\n</div>",$("#result_container").before(d),$(".alert").alert(),ia.hasShownWorkaround=!0,!1)},ca=function(a){var b,c,d,e;return d=a.query.replace(/\+/g," "),a.status===!0?a.query_params.filter.had_filter===!0?(b="",c=0,$.each(a.query_params.filter.filter_params,function(d,e){return"BOOLEAN_TYPE"!==d?(0!==c&&(b=filter_text+" "+a.filter.filter_params.BOOLEAN_TYPE),J(ma(e,!0))&&(e=1===ma(e)?"true":"false"),b=b+" "+d.replace(/_/g," ")+" is "+e):void 0}),e='"'+d+'" where '+b+" returned no results."):e='"'+d+'" returned no results.':e=a.human_error,ka(e)},h=function(a,b){var c,d,e,f,g,h;for(null==a&&(a="paper-menu-button"),null==b&&(b=!0),g=$(a),e=0,d=g.length;d>e;e++)c=g[e],f=$(c).find("paper-menu"),b&&$(f).unbind(),(h=function(a,b){var c,d;return d=$(a).polymerSelected(null,!0),c=$(b).find(".dropdown-label"),$(c).text(d),$(a).polymerSelected()})(f,c),$(f).on("iron-select",function(){return h(this,c)});return!1},$(function(){var a,b,c,e,f,g,i,j,k,l,o,q,r,s,t;if(b="****************************************************************************\nHello developer!\nIf you're looking for hints on our API information, this site is open-source\nand released under the GPL. Just click on the GitHub link on the bottom of\nthe page, or check out https://github.com/SSARHERPS\n****************************************************************************",console.log(b),d(),window.addEventListener("popstate",function(a){var b,c;pa.query=$.url().attr("fragment");try{b=Base64.decode(pa.query)}catch(d){a=d,b=""}return U(b),c=b.split("&")[0],$("#search").attr("value",c)}),$("#do-reset-search").click(function(){return m()}),$("#search_form").submit(function(a){return a.preventDefault(),U()}),$("#collapse-advanced").on("shown.bs.collapse",function(){return $("#collapse-icon").attr("icon","icons:unfold-less")}),$("#collapse-advanced").on("hidden.bs.collapse",function(){return $("#collapse-icon").attr("icon","icons:unfold-more")}),$("#search_form").keypress(function(a){return 13===a.which?U():void 0}),$("#do-search").click(function(){return U()}),$("#do-search-all").click(function(){return U(!0)}),$("#linnean-order").on("iron-select",function(){return I($("#search").val())?void 0:U()}),h(),I(pa.query))j="";else try{j=Base64.decode(pa.query),o=$.url(_.apiPath+"?q="+j);try{k=o.param("loose").toBool()}catch(u){c=u,k=!1}try{i=o.param("fuzzy").toBool()}catch(u){c=u,i=!1}s=j.split("&")[0],Z(s),(g=function(){var a;if(null!=("undefined"!=typeof Polymer&&null!==Polymer&&null!=(a=Polymer.Base)?a.$$:void 0)&&!I(Polymer.Base.$$("#loose")))return p(250,function(){return k&&n("#loose").attr("checked","checked"),i?n("#fuzzy").attr("checked","checked"):void 0}),!1;if(null==ia.stateIter&&(ia.stateIter=0),++ia.stateIter,ia.stateIter>30)return console.warn("Couldn't attach Polymer.Base.ready"),!1;try{return Polymer.Base.ready(function(){return p(250,function(){return console.info("Doing a late Polymer.Base.ready call"),k&&n("#loose").attr("checked","checked"),i&&n("#fuzzy").attr("checked","checked"),Z()})})}catch(b){return p(250,function(){return g()})}})();try{e=o.param("filter"),f=JSON.parse(Base64.decode(e)),l=!1;for(a in f)t=f[a],a=a.replace(/_/g,"-"),r="#"+a+"-filter","type"!==a?"is-alien"!==a?($(r).attr("value",t),l=!0):(q=1===ma(t)?"alien-only":"native-only",console.log("Setting alien-filter to "+q),$("#alien-filter").get(0).selected=q,p(750,function(){return $("#alien-filter").get(0).selected=q})):$("#linnean-order").polymerSelected(t);l&&$("#collapse-advanced").collapse("show")}catch(u){c=u,e=!1}}catch(u){c=u,console.error("Bad argument "+pa.query+" => "+j+", looseState, fuzzyState",k,i,_.apiPath+"?q="+j),console.warn(c.message),j=""}return I(j)||"#"===j?(ja(),$("#search").attr("disabled",!1),(g=function(){var a;if(null!=("undefined"!=typeof Polymer&&null!==Polymer&&null!=(a=Polymer.Base)?a.$$:void 0)&&!I(Polymer.Base.$$("#loose")))return p(250,function(){return n("#loose").attr("checked","checked")}),!1;if(null==ia.stateIter&&(ia.stateIter=0),++ia.stateIter,ia.stateIter>30)return console.warn("Couldn't attach Polymer.Base.ready"),!1;try{return Polymer.Base.ready(function(){return p(250,function(){return n("#loose").attr("checked","checked")})})}catch(b){return p(250,function(){return g()})}})()):$.get(_.targetApi,"q="+j,"json").done(function(a){return a.status===!0&&a.count>0?(x(a),!1):(ca(a),console.error(a.error),console.warn(a))}).fail(function(a,b){return console.error("There was an error loading the generic table"),console.warn(a,b,a.statusText),b=a.status+" - "+a.statusText,$("#search-status").attr("text","Couldn't load table - "+b),$("#search-status")[0].show(),ka()}).always(function(){return $("#search").attr("disabled",!1),!1})})}).call(this);
//# sourceMappingURL=maps/c.map