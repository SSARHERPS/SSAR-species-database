(function(){var o,i,v,a,j,k,n,u,p,m,f,h,s,l,b,d,t,e,g,q=[].slice;s=typeof exports!=="undefined"&&exports!==null?exports:this;k=function(w){return w===true||w===false};n=function(w){return !w||w.length===0};j=function(w){return !w||/^\s*$/.test(w)};p=function(x){try{if(n(x)||j(x)||(x==null)){if(!(x===false||x===0)){return true}}}catch(w){}return false};u=function(x){if(typeof x==="object"){return true}try{JSON.parse(x);return true}catch(w){}return false};m=function(w){return !isNaN(parseFloat(w))&&isFinite(w)};e=function(w){if(!m(w)||p(w)){return 0}return parseFloat(w)};g=function(w){if(!m(w)||p(w)){return 0}return parseInt(w)};function r(w){var y={};for(var x=0;x<w.length;++x){if(w[x]!==undefined){y[x]=w[x]}}return y}String.prototype.toBool=function(){return this.toString()==="true"};Boolean.prototype.toBool=function(){return this.toString()==="true"};Object.size=function(y){var x,w;w=0;for(x in y){if(y.hasOwnProperty(x)){w++}}return w};v=function(w,x){return setTimeout(x,w)};l=function(x,y){var w;if(y==null){y=0}w=Math.pow(10,y);return Math.round(x*w)/w};jQuery.fn.exists=function(){return jQuery(this).length>0};i=(function(w){return function(x){return encodeURI(x).split(/%..|./).length-1}})(this);function c(A){for(var y,w,z=A.length;z;y=Math.floor(Math.random()*z),w=A[--z],A[z]=A[y],A[y]=w){}return A}window.debounce_timer=null;({debounce:function(y,w,x){if(w==null){w=300}if(x==null){x=false}return function(){var A,z,B;A=1<=arguments.length?q.call(arguments,0):[];B=this;z=function(){if(!x){return y.apply(B,A)}};if(window.debounce_timer!=null){clearTimeout(window.debounce_timer)}else{if(x){y.apply(B,A)}}return window.debounce_timer=setTimeout(z,w)}}});Function.prototype.debounce=function(){var z,y,C,x,A,w,B;w=arguments[0],x=arguments[1],B=arguments[2],z=4<=arguments.length?q.call(arguments,3):[];if(w==null){w=300}if(x==null){x=false}if(B==null){B=window.debounce_timer}A=this;y=function(){if(!x){A.apply(A,z)}return console.log("Debounce applied")};if(B!=null){try{clearTimeout(B)}catch(D){C=D}}else{if(x){A.apply(obj,z);console.log("Executed immediately")}}return window.debounce_timer=setTimeout(y,w)};f=function(){return $(".newwindow").each(function(){var w,x;w=$(this).attr("href");x=function(y){if(y==null){return false}window.open(y);return false};$(this).click(function(){return x(w)});return $(this).keypress(function(){return x(w)})})};o=function(D,B){var y,C,z,w,x,A;if(D==null){D=50}if(B==null){B="#status-container"}try{if($(B).exists()){x=l(D*0.5);y=$(B).find(".ball");A=$(B).find(".ball1");y.removeClass("stop hide");y.css({width:""+D+"px",height:""+D+"px"});z=l(D/2+x/2+9);w=l((D+10)/2-(x+6)/2);A.removeClass("stop hide");A.css({width:""+x+"px",height:""+x+"px",top:"-"+z+"px","margin-left":""+w+"px"});return true}return false}catch(E){C=E;return console.log("Could not animate loader",C.message)}};d=function(x){var w,z,y;if(x==null){x="#status-container"}try{if($(x).exists()){w=$(x).find(".ball");y=$(x).find(".ball1");w.addClass("bballgood ballgood");y.addClass("bballgood ball1good");return v(250,function(){w.addClass("stop hide");w.removeClass("bballgood ballgood");y.addClass("stop hide");return y.removeClass("bballgood ball1good")})}}catch(A){z=A;return console.log("Could not stop load animation",z.message)}};t=function(x){var w,z,y;if(x==null){x="#status-container"}try{if($(x).exists()){w=$(x).find(".ball");y=$(x).find(".ball1");w.addClass("bballerror ballerror");y.addClass("bballerror ball1error");return v(1500,function(){w.addClass("stop hide");w.removeClass("bballerror ballerror");y.addClass("stop hide");return y.removeClass("bballerror ball1error")})}}catch(A){z=A;return console.log("Could not stop load error animation",z.message)}};$(function(){var w;try{window.picturefill()}catch(x){w=x;console.log("Could not execute picturefill.")}return f()});b=new Object();b.targetApi="cndb/commonnames_api.php";b.targetContainer="#result_container";h=function(){var w,x;x=$("#search").val();if(p(x)){$("#search-status").attr("text","Please enter a search term.");$("#search-status")[0].show();return false}console.log("Got search value "+x);w="q="+x;return $.post(b.targetApi,w,"json").done(function(y){if(y.status===true){a(y);return false}$("#search-status").attr("text",y.human_error);$("#search-status")[0].show();console.error(y.error);return console.warn(y)}).fail(function(y,z){console.error("There was an error performing the search");console.warn(y,z,y.statusText);z=""+y.status+" - "+y.statusText;$("#search-status").attr("text","Couldn't execute the search - "+z);return $("#search-status")[0].show()}).always(function(){return false})};a=function(w,x){var B,C,z,y,A;if(x==null){x=b.targetContainer}B=w.result;b.result=B;C=new Array();z="";A="<table>\n\t<tr>";y="</table>";return $.each(B,function(F,H){var G,E,D;if(F===0){E=0;$.each(H,function(J,I){A+="\n\t\t<th>"+J+"</th>";E++;if(E===Object.size(H)){return A+="\n\t</tr>"}})}G="\n\t<tr id='cndb-row"+F+"'>";D=0;$.each(H,function(I,J){G+="\n\t\t<td id='"+I+"-"+F+"'>"+J+"</td>";D++;if(D===Object.size(H)){G+="\n\t</tr>";return z+=G}});if(F===Object.size(B)){z=A+z+y;console.log("Processed "+F+" rows");return $(x).html(z)}})};$(function(){console.log("Doing onloads ...");$("#search_form").submit(function(w){w.preventDefault();return h()});$("#do-search").click(function(){return h()});return $.post(b.targetApi,"","json").done(function(w){if(w.status===true){a(w);return false}$("#search-status").attr("text",w.human_error);$("#search-status")[0].show();console.error(w.error);return console.warn(w)}).fail(function(w,x){console.error("There was an error loading the generic table");console.warn(w,x,w.statusText);x=""+w.status+" - "+w.statusText;$("#search-status").attr("text","Couldn't load table - "+x);return $("#search-status")[0].show()}).always(function(){$("#search").attr("disabled",false);return false})})}).call(this);