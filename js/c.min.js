(function(){var o,i,w,a,j,k,n,u,p,m,f,h,s,l,b,v,d,t,e,g,q=[].slice;s=typeof exports!=="undefined"&&exports!==null?exports:this;k=function(x){return x===true||x===false};n=function(x){return !x||x.length===0};j=function(x){return !x||/^\s*$/.test(x)};p=function(y){try{if(n(y)||j(y)||(y==null)){if(!(y===false||y===0)){return true}}}catch(x){}return false};u=function(y){if(typeof y==="object"){return true}try{JSON.parse(y);return true}catch(x){}return false};m=function(x){return !isNaN(parseFloat(x))&&isFinite(x)};e=function(x){if(!m(x)||p(x)){return 0}return parseFloat(x)};g=function(x){if(!m(x)||p(x)){return 0}return parseInt(x)};function r(x){var z={};for(var y=0;y<x.length;++y){if(x[y]!==undefined){z[y]=x[y]}}return z}String.prototype.toBool=function(){return this.toString()==="true"};Boolean.prototype.toBool=function(){return this.toString()==="true"};Object.size=function(z){var y,x;x=0;for(y in z){if(z.hasOwnProperty(y)){x++}}return x};w=function(x,y){return setTimeout(y,x)};l=function(y,z){var x;if(z==null){z=0}x=Math.pow(10,z);return Math.round(y*x)/x};jQuery.fn.exists=function(){return jQuery(this).length>0};i=(function(x){return function(y){return encodeURI(y).split(/%..|./).length-1}})(this);function c(B){for(var z,y,A=B.length;A;z=Math.floor(Math.random()*A),y=B[--A],B[A]=B[z],B[z]=y){}return B}window.debounce_timer=null;({debounce:function(z,x,y){if(x==null){x=300}if(y==null){y=false}return function(){var B,A,C;B=1<=arguments.length?q.call(arguments,0):[];C=this;A=function(){if(!y){return z.apply(C,B)}};if(window.debounce_timer!=null){clearTimeout(window.debounce_timer)}else{if(y){z.apply(C,B)}}return window.debounce_timer=setTimeout(A,x)}}});Function.prototype.debounce=function(){var A,z,D,y,B,x,C;x=arguments[0],y=arguments[1],C=arguments[2],A=4<=arguments.length?q.call(arguments,3):[];if(x==null){x=300}if(y==null){y=false}if(C==null){C=window.debounce_timer}B=this;z=function(){if(!y){B.apply(B,A)}return console.log("Debounce applied")};if(C!=null){try{clearTimeout(C)}catch(E){D=E}}else{if(y){B.apply(obj,A);console.log("Executed immediately")}}return window.debounce_timer=setTimeout(z,x)};f=function(){return $(".newwindow").each(function(){var x,y;x=$(this).attr("href");y=function(z){if(z==null){return false}window.open(z);return false};$(this).click(function(){return y(x)});return $(this).keypress(function(){return y(x)})})};o=function(E,C){var z,D,A,x,y,B;if(E==null){E=50}if(C==null){C="#status-container"}try{if($(C).exists()){y=l(E*0.5);z=$(C).find(".ball");B=$(C).find(".ball1");z.removeClass("stop hide");z.css({width:""+E+"px",height:""+E+"px"});A=l(E/2+y/2+9);x=l((E+10)/2-(y+6)/2);B.removeClass("stop hide");B.css({width:""+y+"px",height:""+y+"px",top:"-"+A+"px","margin-left":""+x+"px"});return true}return false}catch(F){D=F;return console.log("Could not animate loader",D.message)}};d=function(y){var x,A,z;if(y==null){y="#status-container"}try{if($(y).exists()){x=$(y).find(".ball");z=$(y).find(".ball1");x.addClass("bballgood ballgood");z.addClass("bballgood ball1good");return w(250,function(){x.addClass("stop hide");x.removeClass("bballgood ballgood");z.addClass("stop hide");return z.removeClass("bballgood ball1good")})}}catch(B){A=B;return console.log("Could not stop load animation",A.message)}};t=function(y){var x,A,z;if(y==null){y="#status-container"}try{if($(y).exists()){x=$(y).find(".ball");z=$(y).find(".ball1");x.addClass("bballerror ballerror");z.addClass("bballerror ball1error");return w(1500,function(){x.addClass("stop hide");x.removeClass("bballerror ballerror");z.addClass("stop hide");return z.removeClass("bballerror ball1error")})}}catch(B){A=B;return console.log("Could not stop load error animation",A.message)}};$(function(){var x;try{window.picturefill()}catch(y){x=y;console.log("Could not execute picturefill.")}return f()});b=new Object();b.targetApi="cndb/commonnames_api.php";b.targetContainer="#result_container";h=function(){var x,y;y=$("#search").val();if(p(y)){$("#search-status").attr("text","Please enter a search term.");$("#search-status")[0].show();return false}console.log("Got search value "+y);x="q="+y;return $.post(b.targetApi,x,"json").done(function(z){if(z.status===true){a(z);return false}$("#search-status").attr("text",z.human_error);$("#search-status")[0].show();console.error(z.error);return console.warn(z)}).fail(function(z,A){console.error("There was an error performing the search");console.warn(z,A,z.statusText);A=""+z.status+" - "+z.statusText;$("#search-status").attr("text","Couldn't execute the search - "+A);return $("#search-status")[0].show()}).always(function(){return false})};a=function(x,y){var C,D,A,z,B;if(y==null){y=b.targetContainer}C=x.result;b.result=C;D=new Array();A="";B="<table>\n\t<tr>";z="</table>";return $.each(C,function(G,I){var H,F,E;if(G===0){F=0;$.each(I,function(K,J){B+="\n\t\t<th>"+K+"</th>";F++;if(F===Object.size(I)){return B+="\n\t</tr>"}})}H="\n\t<tr id='cndb-row"+G+"'>";E=0;$.each(I,function(J,K){H+="\n\t\t<td id='"+J+"-"+G+"'>"+K+"</td>";E++;if(E===Object.size(I)){H+="\n\t</tr>";return A+=H}});if(G===Object.size(C)){A=B+A+z;console.log("Processed "+G+" rows");return $(y).html(A)}})};v=function(y){var x;return x=b.result};$(function(){console.log("Doing onloads ...");$("#search_form").submit(function(x){x.preventDefault();return h()});$("#do-search").click(function(){return h()});return $.post(b.targetApi,"","json").done(function(x){if(x.status===true){a(x);return false}$("#search-status").attr("text",x.human_error);$("#search-status")[0].show();console.error(x.error);return console.warn(x)}).fail(function(x,y){console.error("There was an error loading the generic table");console.warn(x,y,x.statusText);y=""+x.status+" - "+x.statusText;$("#search-status").attr("text","Couldn't load table - "+y);return $("#search-status")[0].show()}).always(function(){$("#search").attr("disabled",false);return false})})}).call(this);