(function(){var q,j,i,b,z,u,p,g,k,m,o,y,r,n,f,a,v,l,d,x,e,h,w,s=[].slice;v=typeof exports!=="undefined"&&exports!==null?exports:this;m=function(A){return A===true||A===false};o=function(A){return !A||A.length===0};k=function(A){return !A||/^\s*$/.test(A)};r=function(B){try{if(o(B)||k(B)||(B==null)){if(!(B===false||B===0)){return true}}}catch(A){}return false};y=function(B){if(typeof B==="object"){return true}try{JSON.parse(B);return true}catch(A){}return false};n=function(A){return !isNaN(parseFloat(A))&&isFinite(A)};e=function(A){if(!n(A)||r(A)){return 0}return parseFloat(A)};h=function(A){if(!n(A)||r(A)){return 0}return parseInt(A)};function t(A){var C={};for(var B=0;B<A.length;++B){if(A[B]!==undefined){C[B]=A[B]}}return C}String.prototype.toBool=function(){return this.toString()==="true"};Boolean.prototype.toBool=function(){return this.toString()==="true"};Object.size=function(C){var B,A;A=0;for(B in C){if(C.hasOwnProperty(B)){A++}}return A};z=function(A,B){return setTimeout(B,A)};l=function(B,C){var A;if(C==null){C=0}A=Math.pow(10,C);return Math.round(B*A)/A};jQuery.fn.exists=function(){return jQuery(this).length>0};jQuery.fn.isVisible=function(){return jQuery(this).css("display")!=="none"};jQuery.fn.hasChildren=function(){return Object.size(jQuery(this).children())>3};j=(function(A){return function(B){return encodeURI(B).split(/%..|./).length-1}})(this);function c(D){for(var B,A,C=D.length;C;B=Math.floor(Math.random()*C),A=D[--C],D[C]=D[B],D[B]=A){}return D}window.debounce_timer=null;({debounce:function(C,A,B){if(A==null){A=300}if(B==null){B=false}return function(){var E,D,F;E=1<=arguments.length?s.call(arguments,0):[];F=this;D=function(){if(!B){return C.apply(F,E)}};if(window.debounce_timer!=null){clearTimeout(window.debounce_timer)}else{if(B){C.apply(F,E)}}return window.debounce_timer=setTimeout(D,A)}}});Function.prototype.debounce=function(){var D,C,G,B,E,A,F;A=arguments[0],B=arguments[1],F=arguments[2],D=4<=arguments.length?s.call(arguments,3):[];if(A==null){A=300}if(B==null){B=false}if(F==null){F=window.debounce_timer}E=this;C=function(){if(!B){E.apply(E,D)}return console.log("Debounce applied")};if(F!=null){try{clearTimeout(F)}catch(H){G=H}}else{if(B){E.apply(obj,D);console.log("Executed immediately")}}return window.debounce_timer=setTimeout(C,A)};f=function(){return $(".newwindow").each(function(){var A,B;A=$(this).attr("href");B=function(C){if(C==null){return false}window.open(C);return false};$(this).click(function(){return B(A)});return $(this).keypress(function(){return B(A)})})};q=function(H,F){var C,G,D,A,B,E;if(H==null){H=50}if(F==null){F="#status-container"}try{if($(F).exists()){B=l(H*0.5);C=$(F).find(".ball");E=$(F).find(".ball1");C.removeClass("stop hide");C.css({width:""+H+"px",height:""+H+"px"});D=l(H/2+B/2+9);A=l((H+10)/2-(B+6)/2);E.removeClass("stop hide");E.css({width:""+B+"px",height:""+B+"px",top:"-"+D+"px","margin-left":""+A+"px"});return true}return false}catch(I){G=I;return console.log("Could not animate loader",G.message)}};d=function(B){var A,D,C;if(B==null){B="#status-container"}try{if($(B).exists()){A=$(B).find(".ball");C=$(B).find(".ball1");A.addClass("bballgood ballgood");C.addClass("bballgood ball1good");return z(250,function(){A.addClass("stop hide");A.removeClass("bballgood ballgood");C.addClass("stop hide");return C.removeClass("bballgood ballgood")})}}catch(E){D=E;return console.log("Could not stop load animation",D.message)}};x=function(B){var A,D,C;if(B==null){B="#status-container"}try{if($(B).exists()){A=$(B).find(".ball");C=$(B).find(".ball1");A.addClass("bballerror ballerror");C.addClass("bballerror ball1error");return z(1500,function(){A.addClass("stop hide");A.removeClass("bballerror ballerror");C.addClass("stop hide");return C.removeClass("bballerror ballerror")})}}catch(E){D=E;return console.log("Could not stop load error animation",D.message)}};$(function(){var A;try{window.picturefill()}catch(B){A=B;console.log("Could not execute picturefill.")}return f()});a=new Object();a.goodbg="#cae682";a.badbg="#e5786d";if(a.minLength==null){a.minLength=8}if(a.overrideLength==null){a.overrideLength=21}b=function(){var A;A=$("#password").val();if(A.length>a.overrideLength||A.match(/^(?:(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$)$/)){$("#password").css("background",a.goodbg);a.basepwgood=true}else{$("#password").css("background",a.badbg);a.basepwgood=false}g();if(!r($("#password2").val())){i()}w();return false};i=function(){if($("#password").val()===$("#password2").val()){$("#password2").css("background",a.goodbg);a.passmatch=true}else{$("#password2").css("background",a.badbg);a.passmatch=false}w();return false};w=function(){var B,A;try{B=!(a.passmatch&&a.basepwgood);return $("#createUser_submit").attr("disabled",B)}catch(C){A=C;a.passmatch=false;return a.basepwgood=false}};g=function(){var A,B,C;if(!$("#strength-meter").exists()){A="<div id='strength-meter'><div id='strength-requirements'><div id='strength-alpha'><p class='label'>a</p><div class='strength-eval'></div></div><div id='strength-alphacap'><p class='label'>A</p><div class='strength-eval'></div></div><div id='strength-numspecial'><p class='label'>1/!</p><div class='strength-eval'></div></div></div><div id='strength-bar'><label for='password-strength'>Strength: </label><progress id='password-strength' max='5'></progress></div></div>";$("#login .right").prepend(A)}B=$("#password").val();C=zxcvbn(B);$(".strength-eval").css("background",a.badbg);if(B.length>20){$(".strength-eval").css("background",a.goodbg)}else{if(B.match(/^(?:((?=.*\d)|(?=.*\W+)).*$)$/)){$("#strength-numspecial .strength-eval").css("background",a.goodbg)}if(B.match(/^(?=.*[a-z]).*$/)){$("#strength-alpha .strength-eval").css("background",a.goodbg)}if(B.match(/^(?=.*[A-Z]).*$/)){$("#strength-alphacap .strength-eval").css("background",a.goodbg)}}return $("#password-strength").attr("value",C.score+1)};u=function(){};p=function(){var A,D,E,G,C,F,B;event.preventDefault();q();E=$("#totp_code").val();B=$("#username").val();C=$.url();A="async_login_handler.php";F=C.attr("protocol")+"://"+C.attr("host")+"/"+A;D="action=verifytotp&code="+E+"&user="+B;G=$.post(F+A,D,"json");G.done(function(H){var I,J;if(H.status===true){$("#totp_message").text("Correct!").removeClass("error").addClass("good");I=H.expires;J=0;return $.each(H.raw_cookie(function(K,M){var L;$.cookie(K,M,I);J++;if(J===Object.size(H.raw_cookie)){L=C.attr("protocol")+"://"+C.attr("host")+"/";d();return window.location(L)}}))}else{$("#totp_message").text(H.human_error);$("#totp_code").val("");$("#totp_code").focus();return x()}});return G.fail(function(H,I){return x()})};$(function(){$("#password").keypress(function(){return b()}).change(function(){return b()}).keyup(function(){return b()});return $("#password2").keypress(function(){return i()}).change(function(){return i()}).keyup(function(){return i()})})}).call(this);